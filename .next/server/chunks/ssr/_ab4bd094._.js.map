{"version":3,"sources":["../../../../node_modules/.pnpm/next%4016.0.3_react-dom%4019.2.0_react%4019.2.0__react%4019.2.0/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../node_modules/.pnpm/next%4016.0.3_react-dom%4019.2.0_react%4019.2.0__react%4019.2.0/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-server-dom-turbopack-client.ts","../../../../lib/storage.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactServerDOMTurbopackClient\n","// User-specific storage utilities\r\nexport interface UserData {\r\n  projects: any[]\r\n  users: any[]\r\n  allocations: any[]\r\n  positions: any[]\r\n  entities: any[]\r\n  startMonth?: number\r\n  startYear?: number\r\n  systemUsers?: SystemUser[] // Global system users (for login)\r\n}\r\n\r\nexport interface SystemUser {\r\n  id: string\r\n  email: string\r\n  name: string\r\n  password: string\r\n  role: 'admin' | 'editor' | 'viewer'\r\n  isActive: boolean\r\n  createdAt: string\r\n}\r\n\r\nconst STORAGE_KEYS = {\r\n  CURRENT_USER: \"sola-current-user\",\r\n  USER_DATA_PREFIX: \"sola-user-data-\",\r\n  SYSTEM_USERS: \"sola-system-users\", // Global user registry\r\n} as const\r\n\r\nexport function getSystemUsers(): SystemUser[] {\r\n  if (typeof window === 'undefined') return []\r\n  const data = localStorage.getItem(STORAGE_KEYS.SYSTEM_USERS)\r\n  return data ? JSON.parse(data) : []\r\n}\r\n\r\nexport function setSystemUsers(users: SystemUser[]): void {\r\n  if (typeof window === 'undefined') return\r\n  localStorage.setItem(STORAGE_KEYS.SYSTEM_USERS, JSON.stringify(users))\r\n}\r\n\r\nexport function addSystemUser(user: Omit<SystemUser, 'id' | 'createdAt'>): SystemUser {\r\n  const users = getSystemUsers()\r\n  const newUser: SystemUser = {\r\n    ...user,\r\n    id: `system-user-${Date.now()}`,\r\n    createdAt: new Date().toISOString(),\r\n  }\r\n  setSystemUsers([...users, newUser])\r\n  return newUser\r\n}\r\n\r\nexport function updateSystemUser(id: string, updates: Partial<SystemUser>): void {\r\n  const users = getSystemUsers()\r\n  const updated = users.map(u => u.id === id ? { ...u, ...updates } : u)\r\n  setSystemUsers(updated)\r\n}\r\n\r\nexport function deleteSystemUser(id: string): void {\r\n  const users = getSystemUsers()\r\n  setSystemUsers(users.filter(u => u.id !== id))\r\n}\r\n\r\nexport function authenticateUser(email: string, password: string): SystemUser | null {\r\n  const users = getSystemUsers()\r\n  return users.find(u => u.email === email && u.password === password && u.isActive) || null\r\n}\r\n\r\nexport function getCurrentUser(): string | null {\r\n  if (typeof window === 'undefined') return null\r\n  return localStorage.getItem(STORAGE_KEYS.CURRENT_USER)\r\n}\r\n\r\nexport function getCurrentSystemUser(): SystemUser | null {\r\n  const email = getCurrentUser()\r\n  if (!email) return null\r\n  const users = getSystemUsers()\r\n  return users.find(u => u.email === email) || null\r\n}\r\n\r\nexport function setCurrentUser(email: string): void {\r\n  if (typeof window === 'undefined') return\r\n  localStorage.setItem(STORAGE_KEYS.CURRENT_USER, email)\r\n}\r\n\r\nexport function clearCurrentUser(): void {\r\n  if (typeof window === 'undefined') return\r\n  localStorage.removeItem(STORAGE_KEYS.CURRENT_USER)\r\n}\r\n\r\nexport function getUserData(email: string): UserData {\r\n  if (typeof window === 'undefined') return { projects: [], users: [], allocations: [], positions: [], entities: [] }\r\n  \r\n  const data = localStorage.getItem(STORAGE_KEYS.USER_DATA_PREFIX + email)\r\n  return data ? JSON.parse(data) : { projects: [], users: [], allocations: [], positions: [], entities: [] }\r\n}\r\n\r\nexport function setUserData(email: string, data: Partial<UserData>): void {\r\n  if (typeof window === 'undefined') return\r\n  \r\n  const existing = getUserData(email)\r\n  const updated = { ...existing, ...data }\r\n  localStorage.setItem(STORAGE_KEYS.USER_DATA_PREFIX + email, JSON.stringify(updated))\r\n}\r\n\r\nexport function clearUserData(email: string): void {\r\n  if (typeof window === 'undefined') return\r\n  localStorage.removeItem(STORAGE_KEYS.USER_DATA_PREFIX + email)\r\n}\r\n\r\n// Convenience functions that work with the current user\r\nexport function getCurrentUserData(): UserData {\r\n  const currentUser = getCurrentUser()\r\n  if (!currentUser) return { projects: [], users: [], allocations: [], positions: [], entities: [] }\r\n  return getUserData(currentUser)\r\n}\r\n\r\nexport function setCurrentUserData(data: Partial<UserData>): void {\r\n  const currentUser = getCurrentUser()\r\n  if (!currentUser) return\r\n  setUserData(currentUser, data)\r\n}\r\n"],"names":["module","exports","require","vendored","ReactJsxRuntime","ReactServerDOMTurbopackClient"],"mappings":"6CAAAA,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,YAAY,CAAEC,eAAe,+BCFxCJ,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,YAAY,CAAEE,6BAA6B,yBC0B/C,SAAS,IACqB,QAGrC,CAEO,SAAS,EAAe,CAAmB,EAGlD,CAEO,SAAS,EAAc,CAA0C,EAEtE,IAAM,EAAsB,CAC1B,GAAG,CAAI,CACP,GAAI,CAAC,YAAY,EAAE,KAAK,GAAG,GAAA,CAAI,CAC/B,UAAW,IAAI,OAAO,WAAW,EACnC,EAEA,OADA,EAAe,CAAW,EAAQ,EAC3B,CACT,CAEO,SAAS,EAAiB,CAAU,CAAE,CAA4B,EAGvE,EADgB,GAAM,GAAG,CAAC,GAAK,EAAE,CAClB,CADoB,GAAK,EAAK,CAAE,GAAG,CAAC,CAAE,GAAG,CAAQ,AAAD,EAAK,GAEtE,CAEO,SAAS,EAAiB,CAAU,EAEzC,EAAe,GAAM,MAAM,CAAC,GAAK,EAAE,EAAE,GAAK,GAC5C,CAEO,SAAS,EAAiB,CAAa,CAAE,CAAgB,EAE9D,MAAO,EAlCqC,CAkC/B,IAAI,CAAC,GAAK,EAAE,KAAK,GAAK,GAAS,EAAE,QAAQ,GAAK,GAAY,EAAE,QAAQ,GAAK,IACxF,CAEO,SAAS,IACqB,OAAO,IAE5C,CAEO,SAAS,IACd,IAAM,EAAQ,WACd,AAAK,GAEE,AA9CmC,CA4CtC,EAES,CAFD,GAEK,CAAC,GAFC,AAEI,EAAE,KAAK,GAAK,IAAU,IAC/C,CAEO,SAAS,EAAe,CAAa,EAG5C,CAEO,SAAS,IAGhB,CAEO,SAAS,EAAY,CAAa,EACJ,MAAO,CAAE,SAAU,EAAE,CAAE,MAAO,EAAE,CAAE,YAAa,EAAE,CAAE,UAAW,EAAE,CAAE,SAAU,EAAE,AAAC,CAIpH,CAgBO,SAAS,IACd,IAAM,EAAc,WACpB,AAAK,EACE,EADH,AACe,GADM,CAAE,KAAT,IAAmB,EAAE,CAAE,MAAO,EAAE,CAAE,YAAa,EAAE,CAAE,UAAW,EAAE,CAAE,SAAU,EAAE,AAAC,CAEnG,CAEO,SAAS,EAAmB,CAAuB,EAExD,GADoB,CAChB,CAAC,GAEP,UAFoB","ignoreList":[0,1]}