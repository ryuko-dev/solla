{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sinan/sola/lib/storage.ts"],"sourcesContent":["// User-specific storage utilities\r\nexport interface UserData {\r\n  projects: any[]\r\n  users: any[]\r\n  allocations: any[]\r\n  positions: any[]\r\n  entities: any[]\r\n  startMonth?: number\r\n  startYear?: number\r\n  systemUsers?: SystemUser[] // Global system users (for login)\r\n}\r\n\r\nexport interface SystemUser {\r\n  id: string\r\n  email: string\r\n  name: string\r\n  password: string\r\n  role: 'admin' | 'editor' | 'viewer' | 'senior'\r\n  isActive: boolean\r\n  createdAt: string\r\n}\r\n\r\nconst STORAGE_KEYS = {\r\n  CURRENT_USER: \"sola-current-user\",\r\n  USER_DATA_PREFIX: \"sola-user-data-\",\r\n  SYSTEM_USERS: \"sola-system-users\", // Global user registry\r\n} as const\r\n\r\nexport function getSystemUsers(): SystemUser[] {\r\n  if (typeof window === 'undefined') return []\r\n  const data = localStorage.getItem(STORAGE_KEYS.SYSTEM_USERS)\r\n  return data ? JSON.parse(data) : []\r\n}\r\n\r\nexport function setSystemUsers(users: SystemUser[]): void {\r\n  if (typeof window === 'undefined') return\r\n  localStorage.setItem(STORAGE_KEYS.SYSTEM_USERS, JSON.stringify(users))\r\n}\r\n\r\nexport function addSystemUser(user: Omit<SystemUser, 'id' | 'createdAt'>): SystemUser {\r\n  const users = getSystemUsers()\r\n  const newUser: SystemUser = {\r\n    ...user,\r\n    id: `system-user-${Date.now()}`,\r\n    createdAt: new Date().toISOString(),\r\n  }\r\n  setSystemUsers([...users, newUser])\r\n  return newUser\r\n}\r\n\r\nexport function updateSystemUser(id: string, updates: Partial<SystemUser>): void {\r\n  const users = getSystemUsers()\r\n  const updated = users.map(u => u.id === id ? { ...u, ...updates } : u)\r\n  setSystemUsers(updated)\r\n}\r\n\r\nexport function deleteSystemUser(id: string): void {\r\n  const users = getSystemUsers()\r\n  setSystemUsers(users.filter(u => u.id !== id))\r\n}\r\n\r\nexport function authenticateUser(email: string, password: string): SystemUser | null {\r\n  const users = getSystemUsers()\r\n  return users.find(u => u.email === email && u.password === password && u.isActive) || null\r\n}\r\n\r\nexport function getCurrentUser(): string | null {\r\n  if (typeof window === 'undefined') return null\r\n  return localStorage.getItem(STORAGE_KEYS.CURRENT_USER)\r\n}\r\n\r\nexport function getCurrentSystemUser(): SystemUser | null {\r\n  const email = getCurrentUser()\r\n  if (!email) return null\r\n  const users = getSystemUsers()\r\n  return users.find(u => u.email === email) || null\r\n}\r\n\r\nexport function setCurrentUser(email: string): void {\r\n  if (typeof window === 'undefined') return\r\n  localStorage.setItem(STORAGE_KEYS.CURRENT_USER, email)\r\n}\r\n\r\nexport function clearCurrentUser(): void {\r\n  if (typeof window === 'undefined') return\r\n  localStorage.removeItem(STORAGE_KEYS.CURRENT_USER)\r\n}\r\n\r\nexport function getUserData(email: string): UserData {\r\n  if (typeof window === 'undefined') return { projects: [], users: [], allocations: [], positions: [], entities: [] }\r\n  \r\n  const data = localStorage.getItem(STORAGE_KEYS.USER_DATA_PREFIX + email)\r\n  return data ? JSON.parse(data) : { projects: [], users: [], allocations: [], positions: [], entities: [] }\r\n}\r\n\r\nexport function setUserData(email: string, data: Partial<UserData>): void {\r\n  if (typeof window === 'undefined') return\r\n  \r\n  const existing = getUserData(email)\r\n  const updated = { ...existing, ...data }\r\n  localStorage.setItem(STORAGE_KEYS.USER_DATA_PREFIX + email, JSON.stringify(updated))\r\n}\r\n\r\nexport function clearUserData(email: string): void {\r\n  if (typeof window === 'undefined') return\r\n  localStorage.removeItem(STORAGE_KEYS.USER_DATA_PREFIX + email)\r\n}\r\n\r\n// Convenience functions that work with the current user\r\nexport function getCurrentUserData(): UserData {\r\n  const currentUser = getCurrentUser()\r\n  if (!currentUser) return { projects: [], users: [], allocations: [], positions: [], entities: [] }\r\n  return getUserData(currentUser)\r\n}\r\n\r\nexport function setCurrentUserData(data: Partial<UserData>): void {\r\n  const currentUser = getCurrentUser()\r\n  if (!currentUser) return\r\n  setUserData(currentUser, data)\r\n}\r\n"],"names":[],"mappings":"AAAA,kCAAkC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsBlC,MAAM,eAAe;IACnB,cAAc;IACd,kBAAkB;IAClB,cAAc;AAChB;AAEO,SAAS;IACd;;IACA,MAAM,OAAO,aAAa,OAAO,CAAC,aAAa,YAAY;IAC3D,OAAO,OAAO,KAAK,KAAK,CAAC,QAAQ,EAAE;AACrC;AAEO,SAAS,eAAe,KAAmB;IAChD;;IACA,aAAa,OAAO,CAAC,aAAa,YAAY,EAAE,KAAK,SAAS,CAAC;AACjE;AAEO,SAAS,cAAc,IAA0C;IACtE,MAAM,QAAQ;IACd,MAAM,UAAsB;QAC1B,GAAG,IAAI;QACP,IAAI,CAAC,YAAY,EAAE,KAAK,GAAG,IAAI;QAC/B,WAAW,IAAI,OAAO,WAAW;IACnC;IACA,eAAe;WAAI;QAAO;KAAQ;IAClC,OAAO;AACT;AAEO,SAAS,iBAAiB,EAAU,EAAE,OAA4B;IACvE,MAAM,QAAQ;IACd,MAAM,UAAU,MAAM,GAAG,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,KAAK;YAAE,GAAG,CAAC;YAAE,GAAG,OAAO;QAAC,IAAI;IACpE,eAAe;AACjB;AAEO,SAAS,iBAAiB,EAAU;IACzC,MAAM,QAAQ;IACd,eAAe,MAAM,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;AAC5C;AAEO,SAAS,iBAAiB,KAAa,EAAE,QAAgB;IAC9D,MAAM,QAAQ;IACd,OAAO,MAAM,IAAI,CAAC,CAAA,IAAK,EAAE,KAAK,KAAK,SAAS,EAAE,QAAQ,KAAK,YAAY,EAAE,QAAQ,KAAK;AACxF;AAEO,SAAS;IACd;;IACA,OAAO,aAAa,OAAO,CAAC,aAAa,YAAY;AACvD;AAEO,SAAS;IACd,MAAM,QAAQ;IACd,IAAI,CAAC,OAAO,OAAO;IACnB,MAAM,QAAQ;IACd,OAAO,MAAM,IAAI,CAAC,CAAA,IAAK,EAAE,KAAK,KAAK,UAAU;AAC/C;AAEO,SAAS,eAAe,KAAa;IAC1C;;IACA,aAAa,OAAO,CAAC,aAAa,YAAY,EAAE;AAClD;AAEO,SAAS;IACd;;IACA,aAAa,UAAU,CAAC,aAAa,YAAY;AACnD;AAEO,SAAS,YAAY,KAAa;IACvC;;IAEA,MAAM,OAAO,aAAa,OAAO,CAAC,aAAa,gBAAgB,GAAG;IAClE,OAAO,OAAO,KAAK,KAAK,CAAC,QAAQ;QAAE,UAAU,EAAE;QAAE,OAAO,EAAE;QAAE,aAAa,EAAE;QAAE,WAAW,EAAE;QAAE,UAAU,EAAE;IAAC;AAC3G;AAEO,SAAS,YAAY,KAAa,EAAE,IAAuB;IAChE;;IAEA,MAAM,WAAW,YAAY;IAC7B,MAAM,UAAU;QAAE,GAAG,QAAQ;QAAE,GAAG,IAAI;IAAC;IACvC,aAAa,OAAO,CAAC,aAAa,gBAAgB,GAAG,OAAO,KAAK,SAAS,CAAC;AAC7E;AAEO,SAAS,cAAc,KAAa;IACzC;;IACA,aAAa,UAAU,CAAC,aAAa,gBAAgB,GAAG;AAC1D;AAGO,SAAS;IACd,MAAM,cAAc;IACpB,IAAI,CAAC,aAAa,OAAO;QAAE,UAAU,EAAE;QAAE,OAAO,EAAE;QAAE,aAAa,EAAE;QAAE,WAAW,EAAE;QAAE,UAAU,EAAE;IAAC;IACjG,OAAO,YAAY;AACrB;AAEO,SAAS,mBAAmB,IAAuB;IACxD,MAAM,cAAc;IACpB,IAAI,CAAC,aAAa;IAClB,YAAY,aAAa;AAC3B"}},
    {"offset": {"line": 153, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sinan/sola/lib/shared-state.ts"],"sourcesContent":["// Shared state utilities for cross-page persistence\r\n\r\nimport React from 'react'\r\n\r\nexport interface SharedMonthYearState {\r\n  month: number\r\n  year: number\r\n}\r\n\r\nconst SHARED_MONTH_YEAR_KEY = 'sola-shared-month-year'\r\n\r\n// Get shared month/year state\r\nexport function getSharedMonthYear(): SharedMonthYearState {\r\n  if (typeof window === 'undefined') {\r\n    // Default to current month/year for server-side rendering\r\n    const now = new Date()\r\n    return { month: now.getMonth(), year: now.getFullYear() }\r\n  }\r\n  \r\n  try {\r\n    const saved = localStorage.getItem(SHARED_MONTH_YEAR_KEY)\r\n    if (saved) {\r\n      const parsed = JSON.parse(saved)\r\n      // Validate the saved data\r\n      if (typeof parsed.month === 'number' && parsed.month >= 0 && parsed.month <= 11 &&\r\n          typeof parsed.year === 'number' && parsed.year >= 2020 && parsed.year <= 2030) {\r\n        return parsed\r\n      }\r\n    }\r\n  } catch (error) {\r\n    console.warn('Error parsing shared month/year state:', error)\r\n  }\r\n  \r\n  // Fallback to current month/year\r\n  const now = new Date()\r\n  return { month: now.getMonth(), year: now.getFullYear() }\r\n}\r\n\r\n// Set shared month/year state\r\nexport function setSharedMonthYear(month: number, year: number): void {\r\n  if (typeof window === 'undefined') return\r\n  \r\n  try {\r\n    const state: SharedMonthYearState = { month, year }\r\n    localStorage.setItem(SHARED_MONTH_YEAR_KEY, JSON.stringify(state))\r\n    \r\n    // Dispatch custom event to notify other components\r\n    window.dispatchEvent(new CustomEvent('sharedMonthYearChanged', {\r\n      detail: { month, year }\r\n    }))\r\n  } catch (error) {\r\n    console.error('Error saving shared month/year state:', error)\r\n  }\r\n}\r\n\r\n// Hook for components to use shared month/year state with event listening\r\nexport function useSharedMonthYear() {\r\n  if (typeof window === 'undefined') {\r\n    // Server-side fallback\r\n    const now = new Date()\r\n    return [getSharedMonthYear(), setSharedMonthYear] as const\r\n  }\r\n\r\n  const [state, setState] = React.useState<SharedMonthYearState>(getSharedMonthYear)\r\n  \r\n  React.useEffect(() => {\r\n    const handleStorageChange = (e: StorageEvent) => {\r\n      if (e.key === SHARED_MONTH_YEAR_KEY && e.newValue) {\r\n        try {\r\n          const newState = JSON.parse(e.newValue)\r\n          setState(newState)\r\n        } catch (error) {\r\n          console.warn('Error parsing storage change:', error)\r\n        }\r\n      }\r\n    }\r\n    \r\n    const handleCustomEvent = (e: CustomEvent<{ month: number; year: number }>) => {\r\n      setState({ month: e.detail.month, year: e.detail.year })\r\n    }\r\n    \r\n    // Listen for both storage events and custom events\r\n    window.addEventListener('storage', handleStorageChange)\r\n    window.addEventListener('sharedMonthYearChanged', handleCustomEvent as EventListener)\r\n    \r\n    return () => {\r\n      window.removeEventListener('storage', handleStorageChange)\r\n      window.removeEventListener('sharedMonthYearChanged', handleCustomEvent as EventListener)\r\n    }\r\n  }, [])\r\n  \r\n  const setMonthYear = React.useCallback((month: number, year: number) => {\r\n    setState({ month, year })\r\n    setSharedMonthYear(month, year)\r\n  }, [])\r\n  \r\n  return [state, setMonthYear] as const\r\n}\r\n"],"names":[],"mappings":"AAAA,oDAAoD;;;;;;;;;AAEpD;;;AAOA,MAAM,wBAAwB;AAGvB,SAAS;IACd;;IAMA,IAAI;QACF,MAAM,QAAQ,aAAa,OAAO,CAAC;QACnC,IAAI,OAAO;YACT,MAAM,SAAS,KAAK,KAAK,CAAC;YAC1B,0BAA0B;YAC1B,IAAI,OAAO,OAAO,KAAK,KAAK,YAAY,OAAO,KAAK,IAAI,KAAK,OAAO,KAAK,IAAI,MACzE,OAAO,OAAO,IAAI,KAAK,YAAY,OAAO,IAAI,IAAI,QAAQ,OAAO,IAAI,IAAI,MAAM;gBACjF,OAAO;YACT;QACF;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,IAAI,CAAC,0CAA0C;IACzD;IAEA,iCAAiC;IACjC,MAAM,MAAM,IAAI;IAChB,OAAO;QAAE,OAAO,IAAI,QAAQ;QAAI,MAAM,IAAI,WAAW;IAAG;AAC1D;AAGO,SAAS,mBAAmB,KAAa,EAAE,IAAY;IAC5D;;IAEA,IAAI;QACF,MAAM,QAA8B;YAAE;YAAO;QAAK;QAClD,aAAa,OAAO,CAAC,uBAAuB,KAAK,SAAS,CAAC;QAE3D,mDAAmD;QACnD,OAAO,aAAa,CAAC,IAAI,YAAY,0BAA0B;YAC7D,QAAQ;gBAAE;gBAAO;YAAK;QACxB;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yCAAyC;IACzD;AACF;AAGO,SAAS;;IACd;;IAMA,MAAM,CAAC,OAAO,SAAS,GAAG,uSAAK,CAAC,QAAQ,CAAuB;IAE/D,uSAAK,CAAC,SAAS;wCAAC;YACd,MAAM;oEAAsB,CAAC;oBAC3B,IAAI,EAAE,GAAG,KAAK,yBAAyB,EAAE,QAAQ,EAAE;wBACjD,IAAI;4BACF,MAAM,WAAW,KAAK,KAAK,CAAC,EAAE,QAAQ;4BACtC,SAAS;wBACX,EAAE,OAAO,OAAO;4BACd,QAAQ,IAAI,CAAC,iCAAiC;wBAChD;oBACF;gBACF;;YAEA,MAAM;kEAAoB,CAAC;oBACzB,SAAS;wBAAE,OAAO,EAAE,MAAM,CAAC,KAAK;wBAAE,MAAM,EAAE,MAAM,CAAC,IAAI;oBAAC;gBACxD;;YAEA,mDAAmD;YACnD,OAAO,gBAAgB,CAAC,WAAW;YACnC,OAAO,gBAAgB,CAAC,0BAA0B;YAElD;gDAAO;oBACL,OAAO,mBAAmB,CAAC,WAAW;oBACtC,OAAO,mBAAmB,CAAC,0BAA0B;gBACvD;;QACF;uCAAG,EAAE;IAEL,MAAM,eAAe,uSAAK,CAAC,WAAW;wDAAC,CAAC,OAAe;YACrD,SAAS;gBAAE;gBAAO;YAAK;YACvB,mBAAmB,OAAO;QAC5B;uDAAG,EAAE;IAEL,OAAO;QAAC;QAAO;KAAa;AAC9B;GAzCgB"}},
    {"offset": {"line": 268, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sinan/sola/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\r\nimport { twMerge } from 'tailwind-merge'\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,uOAAO,EAAC,IAAA,iMAAI,EAAC;AACtB"}},
    {"offset": {"line": 286, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sinan/sola/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\r\nimport { Slot } from '@radix-ui/react-slot'\r\nimport { cva, type VariantProps } from 'class-variance-authority'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\r\n        destructive:\r\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\r\n        outline:\r\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\r\n        secondary:\r\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\r\n        ghost:\r\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\r\n        link: 'text-primary underline-offset-4 hover:underline',\r\n      },\r\n      size: {\r\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\r\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\r\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\r\n        icon: 'size-9',\r\n        'icon-sm': 'size-8',\r\n        'icon-lg': 'size-10',\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: 'default',\r\n      size: 'default',\r\n    },\r\n  },\r\n)\r\n\r\nfunction Button({\r\n  className,\r\n  variant,\r\n  size,\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<'button'> &\r\n  VariantProps<typeof buttonVariants> & {\r\n    asChild?: boolean\r\n  }) {\r\n  const Comp = asChild ? Slot : 'button'\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"button\"\r\n      className={cn(buttonVariants({ variant, size, className }))}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Button, buttonVariants }\r\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,qPAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,+SAAI,GAAG;IAE9B,qBACE,4TAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KAnBS"}},
    {"offset": {"line": 351, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sinan/sola/lib/permissions.ts"],"sourcesContent":["// Role-based access control utilities\r\n\r\nexport type UserRole = 'admin' | 'editor' | 'viewer' | 'senior'\r\n\r\nexport interface PagePermissions {\r\n  canView: boolean\r\n  canEdit: boolean\r\n  canDelete: boolean\r\n}\r\n\r\nexport interface TabPermissions {\r\n  allocation: PagePermissions\r\n  planning: PagePermissions\r\n  actualAllocation: PagePermissions\r\n  expenseAllocation: PagePermissions\r\n  scheduledRecords: PagePermissions\r\n  settings: PagePermissions\r\n}\r\n\r\n/**\r\n * Get permissions for a specific role and page\r\n */\r\nexport function getPermissions(role: UserRole, page: keyof Omit<TabPermissions, 'settings'>): PagePermissions {\r\n  switch (role) {\r\n    case 'admin':\r\n      return {\r\n        canView: true,\r\n        canEdit: true,\r\n        canDelete: true\r\n      }\r\n    \r\n    case 'senior':\r\n      return {\r\n        canView: true,\r\n        canEdit: true,\r\n        canDelete: true\r\n      }\r\n    \r\n    case 'editor':\r\n      // Editor can view all tabs except settings, but only edit specific pages\r\n      const canEdit = page === 'expenseAllocation' || page === 'scheduledRecords'\r\n      return {\r\n        canView: true,\r\n        canEdit,\r\n        canDelete: canEdit\r\n      }\r\n    \r\n    case 'viewer':\r\n      // Viewer can only view allocation and planning\r\n      const canView = page === 'allocation' || page === 'planning'\r\n      return {\r\n        canView,\r\n        canEdit: false,\r\n        canDelete: false\r\n      }\r\n    \r\n    default:\r\n      return {\r\n        canView: false,\r\n        canEdit: false,\r\n        canDelete: false\r\n      }\r\n  }\r\n}\r\n\r\n/**\r\n * Get all tab permissions for a role\r\n */\r\nexport function getAllTabPermissions(role: UserRole): TabPermissions {\r\n  return {\r\n    allocation: getPermissions(role, 'allocation'),\r\n    planning: getPermissions(role, 'planning'),\r\n    actualAllocation: getPermissions(role, 'actualAllocation'),\r\n    expenseAllocation: getPermissions(role, 'expenseAllocation'),\r\n    scheduledRecords: getPermissions(role, 'scheduledRecords'),\r\n    settings: {\r\n      canView: role === 'admin',\r\n      canEdit: role === 'admin',\r\n      canDelete: role === 'admin'\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Check if user can access a specific tab\r\n */\r\nexport function canAccessTab(role: UserRole, tab: keyof TabPermissions): boolean {\r\n  const permissions = getAllTabPermissions(role)\r\n  return permissions[tab].canView\r\n}\r\n\r\n/**\r\n * Check if user can edit a specific page\r\n */\r\nexport function canEditPage(role: UserRole, page: keyof Omit<TabPermissions, 'settings'>): boolean {\r\n  return getPermissions(role, page).canEdit\r\n}\r\n\r\n/**\r\n * Check if user can lock/unlock payroll allocation\r\n */\r\nexport function canLockPayroll(role: UserRole): boolean {\r\n  return role === 'admin' || role === 'senior'\r\n}\r\n\r\n/**\r\n * Check if user can delete on a specific page\r\n */\r\nexport function canDeletePage(role: UserRole, page: keyof Omit<TabPermissions, 'settings'>): boolean {\r\n  return getPermissions(role, page).canDelete\r\n}\r\n"],"names":[],"mappings":"AAAA,sCAAsC;;;;;;;;;;;;;;;AAsB/B,SAAS,eAAe,IAAc,EAAE,IAA4C;IACzF,OAAQ;QACN,KAAK;YACH,OAAO;gBACL,SAAS;gBACT,SAAS;gBACT,WAAW;YACb;QAEF,KAAK;YACH,OAAO;gBACL,SAAS;gBACT,SAAS;gBACT,WAAW;YACb;QAEF,KAAK;YACH,yEAAyE;YACzE,MAAM,UAAU,SAAS,uBAAuB,SAAS;YACzD,OAAO;gBACL,SAAS;gBACT;gBACA,WAAW;YACb;QAEF,KAAK;YACH,+CAA+C;YAC/C,MAAM,UAAU,SAAS,gBAAgB,SAAS;YAClD,OAAO;gBACL;gBACA,SAAS;gBACT,WAAW;YACb;QAEF;YACE,OAAO;gBACL,SAAS;gBACT,SAAS;gBACT,WAAW;YACb;IACJ;AACF;AAKO,SAAS,qBAAqB,IAAc;IACjD,OAAO;QACL,YAAY,eAAe,MAAM;QACjC,UAAU,eAAe,MAAM;QAC/B,kBAAkB,eAAe,MAAM;QACvC,mBAAmB,eAAe,MAAM;QACxC,kBAAkB,eAAe,MAAM;QACvC,UAAU;YACR,SAAS,SAAS;YAClB,SAAS,SAAS;YAClB,WAAW,SAAS;QACtB;IACF;AACF;AAKO,SAAS,aAAa,IAAc,EAAE,GAAyB;IACpE,MAAM,cAAc,qBAAqB;IACzC,OAAO,WAAW,CAAC,IAAI,CAAC,OAAO;AACjC;AAKO,SAAS,YAAY,IAAc,EAAE,IAA4C;IACtF,OAAO,eAAe,MAAM,MAAM,OAAO;AAC3C;AAKO,SAAS,eAAe,IAAc;IAC3C,OAAO,SAAS,WAAW,SAAS;AACtC;AAKO,SAAS,cAAc,IAAc,EAAE,IAA4C;IACxF,OAAO,eAAe,MAAM,MAAM,SAAS;AAC7C"}},
    {"offset": {"line": 438, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sinan/sola/components/navigation.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport Link from \"next/link\"\r\nimport { getCurrentSystemUser } from \"../lib/storage\"\r\nimport { canAccessTab, UserRole } from \"../lib/permissions\"\r\nimport { useState, useEffect } from \"react\"\r\n\r\ninterface NavigationProps {\r\n  currentPage: string\r\n}\r\n\r\nexport function Navigation({ currentPage }: NavigationProps) {\r\n  const [userRole, setUserRole] = useState<UserRole | null>(null)\r\n\r\n  useEffect(() => {\r\n    const systemUser = getCurrentSystemUser()\r\n    setUserRole(systemUser?.role || null)\r\n  }, [])\r\n\r\n  if (!userRole) return null\r\n\r\n  const tabs = [\r\n    { key: 'allocation', label: 'Allocation', href: '/' },\r\n    { key: 'planning', label: 'Planning', href: '/planning' },\r\n    { key: 'actualAllocation', label: 'Payroll Allocation', href: '/actual-allocation' },\r\n    { key: 'expenseAllocation', label: 'Expense Allocation', href: '/expense-allocation' },\r\n    { key: 'scheduledRecords', label: 'Scheduled Records', href: '/scheduled-records' },\r\n  ] as const\r\n\r\n  const visibleTabs = tabs.filter(tab => canAccessTab(userRole, tab.key))\r\n\r\n  return (\r\n    <nav className=\"bg-white border-b border-gray-200 px-6 py-3\">\r\n      <div className=\"flex items-center gap-6\">\r\n        <h1 className=\"text-lg font-semibold text-gray-900\">Sola Allocation Tool</h1>\r\n        <div className=\"flex gap-4\">\r\n          {visibleTabs.map((tab) => (\r\n            <Link\r\n              key={tab.key}\r\n              href={tab.href}\r\n              className={\r\n                currentPage === tab.href\r\n                  ? \"text-blue-600 hover:text-blue-800 font-medium\"\r\n                  : \"text-gray-600 hover:text-gray-800 font-medium\"\r\n              }\r\n            >\r\n              {tab.label}\r\n            </Link>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAWO,SAAS,WAAW,EAAE,WAAW,EAAmB;;IACzD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,wSAAQ,EAAkB;IAE1D,IAAA,ySAAS;gCAAC;YACR,MAAM,aAAa,IAAA,yIAAoB;YACvC,YAAY,YAAY,QAAQ;QAClC;+BAAG,EAAE;IAEL,IAAI,CAAC,UAAU,OAAO;IAEtB,MAAM,OAAO;QACX;YAAE,KAAK;YAAc,OAAO;YAAc,MAAM;QAAI;QACpD;YAAE,KAAK;YAAY,OAAO;YAAY,MAAM;QAAY;QACxD;YAAE,KAAK;YAAoB,OAAO;YAAsB,MAAM;QAAqB;QACnF;YAAE,KAAK;YAAqB,OAAO;YAAsB,MAAM;QAAsB;QACrF;YAAE,KAAK;YAAoB,OAAO;YAAqB,MAAM;QAAqB;KACnF;IAED,MAAM,cAAc,KAAK,MAAM,CAAC,CAAA,MAAO,IAAA,qIAAY,EAAC,UAAU,IAAI,GAAG;IAErE,qBACE,4TAAC;QAAI,WAAU;kBACb,cAAA,4TAAC;YAAI,WAAU;;8BACb,4TAAC;oBAAG,WAAU;8BAAsC;;;;;;8BACpD,4TAAC;oBAAI,WAAU;8BACZ,YAAY,GAAG,CAAC,CAAC,oBAChB,4TAAC,ySAAI;4BAEH,MAAM,IAAI,IAAI;4BACd,WACE,gBAAgB,IAAI,IAAI,GACpB,kDACA;sCAGL,IAAI,KAAK;2BARL,IAAI,GAAG;;;;;;;;;;;;;;;;;;;;;AAe1B;GA1CgB;KAAA"}},
    {"offset": {"line": 544, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sinan/sola/app/actual-allocation/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as XLSX from \"xlsx\"\r\nimport type { User, Project, Allocation, Position, Entity } from \"@/lib/types\"\r\nimport { getCurrentUser, getCurrentUserData, getCurrentSystemUser, getSystemUsers, getUserData } from \"@/lib/storage\"\r\nimport { canEditPage, canAccessTab, UserRole, canLockPayroll } from \"@/lib/permissions\"\r\nimport { getSharedMonthYear, setSharedMonthYear } from \"@/lib/shared-state\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Navigation } from \"@/components/navigation\"\r\n\r\nconst MONTHS = [\r\n  \"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\r\n  \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\r\n]\r\n\r\ninterface PayrollData {\r\n  currency: string\r\n  netSalary: number\r\n  socialSecurity: number\r\n  employeeTax: number\r\n  employerTax: number\r\n  housing: number\r\n  otherBenefits: number\r\n}\r\n\r\ninterface FringeData {\r\n  workingDays: number\r\n  annualLeave: number\r\n  sickLeave: number\r\n  publicHolidays: number\r\n  dailyRate: number\r\n}\r\n\r\ninterface UserExtended extends User {\r\n  entity?: string\r\n  payrollDataByMonth?: Record<string, PayrollData> // key: \"year-month\" (e.g., \"2024-0\")\r\n  fringeDataByMonth?: Record<string, FringeData> // key: \"year-month\" (e.g., \"2024-0\")\r\n  projectDataByMonth?: Record<string, Record<string, number>> // key: \"year-month\" -> projectId -> allocation percentage\r\n}\r\n\r\ninterface MonthlyAllocationItem {\r\n  id: string\r\n  name: string\r\n  code: string\r\n  description: string\r\n  currency: string\r\n  amount: number\r\n  project: string\r\n  projectTask: string\r\n  account: string\r\n}\r\n\r\nexport default function ActualAllocationPage() {\r\n  const [currentUser, setCurrentUser] = React.useState<string | null>(null)\r\n  const [users, setUsers] = React.useState<UserExtended[]>([])\r\n  const [projects, setProjects] = React.useState<any[]>([])\r\n  const [entities, setEntities] = React.useState<any[]>([])\r\n  const [allocations, setAllocations] = React.useState<any[]>([]) // Load staff allocations\r\n  \r\n  // Initialize with shared month/year state\r\n  const sharedState = getSharedMonthYear()\r\n  const [selectedMonth, setSelectedMonth] = React.useState<number>(sharedState.month)\r\n  const [selectedYear, setSelectedYear] = React.useState<number>(sharedState.year)\r\n  \r\n  const [isLocked, setIsLocked] = React.useState<boolean>(false)\r\n  const [monthlyAllocation, setMonthlyAllocation] = React.useState<MonthlyAllocationItem[]>([])\r\n  const [showPercentage, setShowPercentage] = React.useState<boolean>(false)\r\n  const [isClient, setIsClient] = React.useState<boolean>(false)\r\n\r\n  // Update shared state when month/year changes\r\n  const updateMonthYear = React.useCallback((month: number, year: number) => {\r\n    setSelectedMonth(month)\r\n    setSelectedYear(year)\r\n    setSharedMonthYear(month, year)\r\n  }, [])\r\n\r\n  // Handle client-side hydration\r\n  React.useEffect(() => {\r\n    setIsClient(true)\r\n  }, [])\r\n\r\n  // Load user data on component mount\r\n  React.useEffect(() => {\r\n    const user = getCurrentUser()\r\n    const systemUser = getCurrentSystemUser()\r\n    if (!user || !systemUser) {\r\n      window.location.href = \"/login\"\r\n      return\r\n    }\r\n    \r\n    setCurrentUser(user)\r\n    \r\n    // Load users and projects data from localStorage\r\n    const userData = getCurrentUserData()\r\n    const monthKey = `${selectedYear}-${selectedMonth}`\r\n    \r\n    // Load projects\r\n    setProjects(userData.projects || [])\r\n    \r\n    // Load allocations from staff allocation table\r\n    setAllocations(userData.allocations || [])\r\n    \r\n    // Load entities for account codes\r\n    setEntities(userData.entities || [])\r\n    \r\n    // Load month-specific lock state (applies to all users)\r\n    const savedLockState = localStorage.getItem(`sola-lock-state-${monthKey}`)\r\n    setIsLocked(savedLockState === 'true')\r\n    \r\n    // Initialize monthly allocation items\r\n    const savedMonthlyAllocation = localStorage.getItem(`sola-monthly-allocation-${user}-${monthKey}`)\r\n    \r\n    if (savedMonthlyAllocation) {\r\n      setMonthlyAllocation(JSON.parse(savedMonthlyAllocation))\r\n    } else {\r\n      // Initialize with default items for each staff member and account category\r\n      const accountCategories = [\r\n        { name: 'Net Salary', code: '631 0001' },\r\n        { name: 'Fringe Benefit - Leave', code: '631 0001' },\r\n        { name: 'Social Security', code: '635 1001' },\r\n        { name: 'Employee Tax', code: '620 1005' },\r\n        { name: 'Employer Tax', code: '620 1005' },\r\n        { name: 'Housing', code: '635 4001' },\r\n        { name: 'Other Benefits', code: '602 4001' }\r\n      ]\r\n      \r\n      const defaultItems: MonthlyAllocationItem[] = []\r\n      userData.users.forEach(user => {\r\n        accountCategories.forEach((category, index) => {\r\n          defaultItems.push({\r\n            id: `${user.id}-${category.code}-${index}`,\r\n            name: user.name,\r\n            code: category.code,\r\n            description: `${user.name} - ${category.name} for ${MONTHS[selectedMonth]} ${selectedYear}`,\r\n            currency: 'USD',\r\n            amount: 0,\r\n            project: '',\r\n            projectTask: '',\r\n            account: `${category.name} [${category.code}]`\r\n          })\r\n        })\r\n      })\r\n      setMonthlyAllocation(defaultItems)\r\n    }\r\n    \r\n    const usersWithPayroll = userData.users.map(user => {\r\n      // Load existing monthly data or create new empty structure\r\n      const existingPayrollData = (user as any).payrollDataByMonth?.[monthKey]\r\n      const existingFringeData = (user as any).fringeDataByMonth?.[monthKey]\r\n      const existingProjectData = (user as any).projectDataByMonth?.[monthKey]\r\n      \r\n      return {\r\n        ...user,\r\n        entity: user.entity || \"Unassigned\",\r\n        payrollDataByMonth: {\r\n          ...(user as any).payrollDataByMonth,\r\n          [monthKey]: existingPayrollData || {\r\n            currency: \"USD\",\r\n            netSalary: 0,\r\n            socialSecurity: 0,\r\n            employeeTax: 0,\r\n            employerTax: 0,\r\n            housing: 0,\r\n            otherBenefits: 0\r\n          }\r\n        },\r\n        fringeDataByMonth: {\r\n          ...(user as any).fringeDataByMonth,\r\n          [monthKey]: existingFringeData || {\r\n            workingDays: calculateWorkingDays(user.workDays || 'mon-fri', selectedMonth, selectedYear),\r\n            annualLeave: 0,\r\n            sickLeave: 0,\r\n            publicHolidays: 0,\r\n            dailyRate: 0\r\n          }\r\n        },\r\n        projectDataByMonth: {\r\n          ...(user as any).projectDataByMonth,\r\n          [monthKey]: existingProjectData || {}\r\n        }\r\n      }\r\n    })\r\n    setUsers(usersWithPayroll)\r\n  }, [])\r\n\r\n  // Check if current user is admin\r\n  const isAdmin = () => {\r\n    const systemUser = getCurrentSystemUser()\r\n    return systemUser?.role === 'admin'\r\n  }\r\n\r\n  // Toggle lock state (admin only)\r\n  const toggleLock = () => {\r\n    if (!isAdmin()) return\r\n    \r\n    const newLockState = !isLocked\r\n    setIsLocked(newLockState)\r\n    \r\n    // Save month-specific lock state to localStorage (applies to all users)\r\n    const monthKey = `${selectedYear}-${selectedMonth}`\r\n    localStorage.setItem(`sola-lock-state-${monthKey}`, newLockState.toString())\r\n  }\r\n\r\n  // Reload lock state when month/year changes\r\n  React.useEffect(() => {\r\n    const monthKey = `${selectedYear}-${selectedMonth}`\r\n    const savedLockState = localStorage.getItem(`sola-lock-state-${monthKey}`)\r\n    setIsLocked(savedLockState === 'true')\r\n  }, [selectedMonth, selectedYear])\r\n\r\n  // Recalculate working days when month/year changes\r\n  React.useEffect(() => {\r\n    const monthKey = `${selectedYear}-${selectedMonth}`\r\n    setUsers(prevUsers => \r\n      prevUsers.map(user => ({\r\n        ...user,\r\n        fringeDataByMonth: {\r\n          ...user.fringeDataByMonth,\r\n          [monthKey]: {\r\n            ...(user.fringeDataByMonth?.[monthKey] || {\r\n              annualLeave: 0,\r\n              sickLeave: 0,\r\n              publicHolidays: 0,\r\n              dailyRate: 0\r\n            }),\r\n            workingDays: calculateWorkingDays(user.workDays || 'mon-fri', selectedMonth, selectedYear)\r\n          }\r\n        }\r\n      }))\r\n    )\r\n  }, [selectedMonth, selectedYear])\r\n\r\n  // Reload monthly allocation when month/year changes\r\n  React.useEffect(() => {\r\n    const user = getCurrentUser()\r\n    if (!user) return\r\n    \r\n    const monthKey = `${selectedYear}-${selectedMonth}`\r\n    const savedMonthlyAllocation = localStorage.getItem(`sola-monthly-allocation-${user}-${monthKey}`)\r\n    const userData = getCurrentUserData()\r\n    \r\n    if (savedMonthlyAllocation) {\r\n      const loadedData = JSON.parse(savedMonthlyAllocation)\r\n      // Update descriptions with current month/year, preserving account category\r\n      const updatedData = loadedData.map((item: MonthlyAllocationItem) => {\r\n        // Extract account category name from the account field\r\n        const accountName = item.account.split(' [')[0]\r\n        return {\r\n          ...item,\r\n          description: `${item.name} - ${accountName} ${MONTHS[selectedMonth]} ${selectedYear}`\r\n        }\r\n      })\r\n      setMonthlyAllocation(updatedData)\r\n    } else {\r\n      // Initialize with default items for each staff member and account category\r\n      const accountCategories = [\r\n        { name: 'Net Salary', code: '631 0001' },\r\n        { name: 'Fringe Benefit - Leave', code: '631 0001' },\r\n        { name: 'Social Security', code: '635 1001' },\r\n        { name: 'Employee Tax', code: '620 1005' },\r\n        { name: 'Employer Tax', code: '620 1005' },\r\n        { name: 'Housing', code: '635 4001' },\r\n        { name: 'Other Benefits', code: '602 4001' }\r\n      ]\r\n      \r\n      const defaultItems: MonthlyAllocationItem[] = []\r\n      userData.users.forEach(user => {\r\n        accountCategories.forEach((category, index) => {\r\n          defaultItems.push({\r\n            id: `${user.id}-${category.code}-${index}`,\r\n            name: user.name,\r\n            code: category.code,\r\n            description: `${user.name} - ${category.name} for ${MONTHS[selectedMonth]} ${selectedYear}`,\r\n            currency: 'USD',\r\n            amount: 0,\r\n            project: '',\r\n            projectTask: '',\r\n            account: `${category.name} [${category.code}]`\r\n          })\r\n        })\r\n      })\r\n      setMonthlyAllocation(defaultItems)\r\n    }\r\n  }, [selectedMonth, selectedYear])\r\n\r\n  // Calculate working days based on user's work pattern\r\n  const calculateWorkingDays = (workPattern: 'mon-fri' | 'sun-thu', month: number, year: number): number => {\r\n    const date = new Date(year, month, 1)\r\n    const daysInMonth = new Date(year, month + 1, 0).getDate()\r\n    let workingDays = 0\r\n    \r\n    for (let day = 1; day <= daysInMonth; day++) {\r\n      date.setDate(day)\r\n      const dayOfWeek = date.getDay()\r\n      \r\n      if (workPattern === 'mon-fri') {\r\n        if (dayOfWeek >= 1 && dayOfWeek <= 5) workingDays++\r\n      } else {\r\n        if (dayOfWeek >= 0 && dayOfWeek <= 4) workingDays++\r\n      }\r\n    }\r\n    \r\n    return workingDays\r\n  }\r\n\r\n  // Filter projects that are active in the selected month\r\n  const getActiveProjects = () => {\r\n    const monthIndex = (selectedYear - 2024) * 12 + selectedMonth\r\n    return projects.filter(project => {\r\n      const projectStartMonth = (project.startYear - 2024) * 12 + (project.startMonth || 0)\r\n      const projectEndMonth = (project.endYear - 2024) * 12 + (project.endMonth || 11)\r\n      return monthIndex >= projectStartMonth && monthIndex <= projectEndMonth\r\n    })\r\n  }\r\n\r\n  // Handle cell value changes\r\n  const handleCellValueChange = (userId: string, field: string, value: string, section: 'payroll' | 'fringe' | 'project', projectId?: string) => {\r\n    // Prevent changes if locked\r\n    if (isLocked) return\r\n    \r\n    const monthKey = `${selectedYear}-${selectedMonth}`\r\n    const numValue = parseFloat(value) || 0\r\n    \r\n    setUsers(prevUsers => {\r\n      const updatedUsers = prevUsers.map(user => {\r\n        if (user.id === userId) {\r\n          if (section === 'payroll') {\r\n            return {\r\n              ...user,\r\n              payrollDataByMonth: {\r\n                ...user.payrollDataByMonth,\r\n                [monthKey]: {\r\n                  ...(user.payrollDataByMonth?.[monthKey] || {\r\n                    currency: \"USD\",\r\n                    netSalary: 0,\r\n                    socialSecurity: 0,\r\n                    employeeTax: 0,\r\n                    employerTax: 0,\r\n                    housing: 0,\r\n                    otherBenefits: 0\r\n                  }),\r\n                  [field]: field === 'currency' ? value : numValue\r\n                }\r\n              }\r\n            }\r\n          } else if (section === 'fringe') {\r\n            return {\r\n              ...user,\r\n              fringeDataByMonth: {\r\n                ...user.fringeDataByMonth,\r\n                [monthKey]: {\r\n                  ...(user.fringeDataByMonth?.[monthKey] || {\r\n                    workingDays: calculateWorkingDays(user.workDays || 'mon-fri', selectedMonth, selectedYear),\r\n                    annualLeave: 0,\r\n                    sickLeave: 0,\r\n                    publicHolidays: 0,\r\n                    dailyRate: 0\r\n                  }),\r\n                  [field]: numValue\r\n                }\r\n              }\r\n            }\r\n          } else if (section === 'project' && projectId) {\r\n            return {\r\n              ...user,\r\n              projectDataByMonth: {\r\n                ...user.projectDataByMonth,\r\n                [monthKey]: {\r\n                  ...(user.projectDataByMonth?.[monthKey] || {}),\r\n                  [projectId]: numValue\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        return user\r\n      })\r\n      \r\n      // Save to localStorage\r\n      const userData = getCurrentUserData()\r\n      const updatedUserData = {\r\n        ...userData,\r\n        users: updatedUsers.map(user => ({\r\n          ...user,\r\n          payrollDataByMonth: user.payrollDataByMonth,\r\n          fringeDataByMonth: user.fringeDataByMonth,\r\n          projectDataByMonth: user.projectDataByMonth\r\n        }))\r\n      }\r\n      \r\n      // Save to localStorage using the same key as the main app\r\n      const currentUser = getCurrentUser()\r\n      if (currentUser) {\r\n        const storageKey = `sola-user-data-${currentUser}`\r\n        localStorage.setItem(storageKey, JSON.stringify(updatedUserData))\r\n      }\r\n      \r\n      return updatedUsers\r\n    })\r\n  }\r\n\r\n  // Handle monthly allocation changes\r\n  const handleMonthlyAllocationChange = (itemId: string, field: keyof MonthlyAllocationItem, value: string | number) => {\r\n    // Prevent changes if locked\r\n    if (isLocked) return\r\n    \r\n    setMonthlyAllocation(prev => {\r\n      const updated = prev.map(item => {\r\n        if (item.id === itemId) {\r\n          return { ...item, [field]: value }\r\n        }\r\n        return item\r\n      })\r\n      \r\n      // Save to localStorage\r\n      const monthKey = `${selectedYear}-${selectedMonth}`\r\n      const user = getCurrentUser()\r\n      if (user) {\r\n        localStorage.setItem(`sola-monthly-allocation-${user}-${monthKey}`, JSON.stringify(updated))\r\n      }\r\n      \r\n      return updated\r\n    })\r\n  }\r\n\r\n  // Helper to check if user has ended by a given month\r\n  const isUserEndedInMonth = (user: UserExtended, month: number, year: number): boolean => {\r\n    if (!user?.endDate) return false\r\n    \r\n    const end = new Date(user.endDate)\r\n    if (Number.isNaN(end.getTime())) return false\r\n    \r\n    const endMonth = end.getMonth() // 0-11\r\n    const endYear = end.getFullYear()\r\n    \r\n    // User has ended if selected month/year is after their end date\r\n    return (year > endYear) || (year === endYear && month > endMonth)\r\n  }\r\n  \r\n  // Helper to check if user has started by a given month\r\n  const isUserStartedInMonth = (user: UserExtended, month: number, year: number): boolean => {\r\n    if (!user?.startDate) return true // No start date means they've always been active\r\n    \r\n    const start = new Date(user.startDate)\r\n    if (Number.isNaN(start.getTime())) return true\r\n    \r\n    const startMonth = start.getMonth() // 0-11\r\n    const startYear = start.getFullYear()\r\n    \r\n    // User has started if selected month/year is on or after their start date\r\n    return (year > startYear) || (year === startYear && month >= startMonth)\r\n  }\r\n\r\n  // Helper to check if user is active in selected month\r\n  const isUserActiveInSelectedMonth = (user: UserExtended): boolean => {\r\n    return isUserStartedInMonth(user, selectedMonth, selectedYear) && \r\n           !isUserEndedInMonth(user, selectedMonth, selectedYear)\r\n  }\r\n\r\n  // Group users by entity (only include users active in selected month)\r\n  const groupedByEntity = users\r\n    .filter(user => isUserActiveInSelectedMonth(user))\r\n    .reduce((acc: Record<string, UserExtended[]>, user: UserExtended) => {\r\n      const entity = user.entity || \"Unassigned\"\r\n      if (!acc[entity]) {\r\n        acc[entity] = []\r\n      }\r\n      acc[entity].push(user)\r\n      return acc\r\n    }, {} as Record<string, UserExtended[]>)\r\n\r\n  const activeProjects = getActiveProjects()\r\n\r\n  // Function to automatically populate project task based on staff allocation\r\n  const getProjectTaskFromAllocation = (itemName: string, projectName: string, monthKey: string): string => {\r\n    // Find the user for this allocation item\r\n    const user = users.find((u: User) => u.name === itemName)\r\n    if (!user) return ''\r\n    \r\n    // Get the global month index for the selected month/year\r\n    const globalMonthIndex = (selectedYear - 2024) * 12 + selectedMonth\r\n    \r\n    // Find allocations for this user, project, and month\r\n    const userAllocations = allocations.filter((a: Allocation) => \r\n      a.userId === user.id && \r\n      a.projectId === projects.find((p: Project) => p.name === projectName)?.id &&\r\n      a.monthIndex === globalMonthIndex\r\n    )\r\n    \r\n    if (userAllocations.length === 0) return ''\r\n    \r\n    // Get the position name from the allocation\r\n    const positionName = userAllocations[0].positionName\r\n    if (!positionName) return ''\r\n    \r\n    // Find the project and its positions for this month\r\n    const project = projects.find((p: Project) => p.name === projectName)\r\n    if (!project || !project.positions) return ''\r\n    \r\n    // Find the position for this month and get its projectTask\r\n    const position = project.positions.find((p: Position) => \r\n      p.name === positionName && \r\n      p.monthIndex === globalMonthIndex\r\n    )\r\n    \r\n    return position?.projectTask || ''\r\n  }\r\n\r\n  // Filter monthly allocation rows based on main table amounts and update currency and auto-calculate amounts\r\n  const filteredMonthlyAllocation = React.useMemo(() => {\r\n    const existingAllocationRows = monthlyAllocation.flatMap(item => {\r\n      const user = users.find((u: User) => u.id === item.name || u.name === item.name)\r\n      if (!user) return []\r\n      \r\n      const monthKey = `${selectedYear}-${selectedMonth}`\r\n      const payrollData = user.payrollDataByMonth?.[monthKey]\r\n      const fringeData = user.fringeDataByMonth?.[monthKey]\r\n      const projectData = user.projectDataByMonth?.[monthKey] || {}\r\n      \r\n      // Calculate total project hours for percentage calculation\r\n      const totalProjectHours = activeProjects.reduce((total, project) => total + (projectData[project.id] || 0), 0)\r\n      \r\n      // Calculate amount based on account type\r\n      let calculatedAmount = 0\r\n      const dailyRate = payrollData?.netSalary && fringeData?.workingDays ? payrollData.netSalary / fringeData.workingDays : 0\r\n      const leaveDeduction = ((fringeData?.annualLeave || 0) + (fringeData?.sickLeave || 0) + (fringeData?.publicHolidays || 0)) * dailyRate\r\n      const netSalaryForProjects = (payrollData?.netSalary || 0) - leaveDeduction\r\n      const fringeBenefitAmount = leaveDeduction\r\n      \r\n      // Get base amount for this account type\r\n      let baseAmount = 0\r\n      switch (item.account) {\r\n        case 'Net Salary [631 0001]':\r\n          baseAmount = netSalaryForProjects\r\n          break\r\n        case 'Social Security [635 1001]':\r\n          baseAmount = payrollData?.socialSecurity || 0\r\n          break\r\n        case 'Employee Tax [620 1005]':\r\n          baseAmount = payrollData?.employeeTax || 0\r\n          break\r\n        case 'Employer Tax [620 1005]':\r\n          baseAmount = payrollData?.employerTax || 0\r\n          break\r\n        case 'Housing [635 4001]':\r\n          baseAmount = payrollData?.housing || 0\r\n          break\r\n        case 'Other Benefits [602 4001]':\r\n          baseAmount = payrollData?.otherBenefits || 0\r\n          break\r\n        case 'Fringe Benefit - Leave [631 0001]':\r\n          baseAmount = fringeBenefitAmount\r\n          break\r\n        default:\r\n          baseAmount = 0\r\n      }\r\n      \r\n      // Create rows for each project that has allocated hours\r\n      const projectRows: MonthlyAllocationItem[] = []\r\n      if (totalProjectHours > 0 && baseAmount > 0) {\r\n        activeProjects.forEach(project => {\r\n          const projectHours = projectData[project.id] || 0\r\n          if (projectHours > 0) {\r\n            const projectPercentage = (projectHours / totalProjectHours) * 100\r\n            const calculatedAmount = baseAmount * projectPercentage / 100\r\n            \r\n            projectRows.push({\r\n              ...item,\r\n              id: `${item.id}-${project.id}`,\r\n              currency: payrollData?.currency || 'USD',\r\n              amount: parseFloat(calculatedAmount.toFixed(2)),\r\n              project: project.name,\r\n              projectTask: getProjectTaskFromAllocation(item.name, project.name, monthKey)\r\n            })\r\n          }\r\n        })\r\n      }\r\n      \r\n      return projectRows\r\n    }).filter(item => {\r\n      const user = users.find((u: User) => u.id === item.name || u.name === item.name)\r\n      if (!user) return false\r\n      \r\n      const monthKey = `${selectedYear}-${selectedMonth}`\r\n      const payrollData = user.payrollDataByMonth?.[monthKey]\r\n      \r\n      // Check corresponding amount in main table based on account category\r\n      switch (item.account) {\r\n        case 'Net Salary [631 0001]':\r\n          return payrollData?.netSalary && payrollData.netSalary > 0\r\n        case 'Social Security [635 1001]':\r\n          return payrollData?.socialSecurity && payrollData.socialSecurity > 0\r\n        case 'Employee Tax [620 1005]':\r\n          return payrollData?.employeeTax && payrollData.employeeTax > 0\r\n        case 'Employer Tax [620 1005]':\r\n          return payrollData?.employerTax && payrollData.employerTax > 0\r\n        case 'Housing [635 4001]':\r\n          return payrollData?.housing && payrollData.housing > 0\r\n        case 'Other Benefits [602 4001]':\r\n          return payrollData?.otherBenefits && payrollData.otherBenefits > 0\r\n        case 'Fringe Benefit - Leave [631 0001]':\r\n          // For fringe benefit, check if any leave data exists\r\n          const fringeData = user.fringeDataByMonth?.[monthKey]\r\n          return (fringeData?.annualLeave && fringeData.annualLeave > 0) ||\r\n                 (fringeData?.sickLeave && fringeData.sickLeave > 0) ||\r\n                 (fringeData?.publicHolidays && fringeData.publicHolidays > 0)\r\n        default:\r\n          return true\r\n      }\r\n    })\r\n\r\n    // Add payroll allocation rows for each active user\r\n    const payrollRows: MonthlyAllocationItem[] = []\r\n    users.filter(user => isUserActiveInSelectedMonth(user)).forEach(user => {\r\n      const monthKey = `${selectedYear}-${selectedMonth}`\r\n      const payrollData = user.payrollDataByMonth?.[monthKey]\r\n      \r\n      if (payrollData) {\r\n        const netSalary = payrollData?.netSalary || 0\r\n        const housing = payrollData?.housing || 0\r\n        const otherBenefits = payrollData?.otherBenefits || 0\r\n        const totalAmount = (netSalary + housing + otherBenefits) * -1\r\n        \r\n        payrollRows.push({\r\n          id: `payroll-${user.id}-${monthKey}`,\r\n          name: user.name,\r\n          code: user.vendorAC || '',\r\n          description: `${user.name} ${MONTHS[selectedMonth]} ${selectedYear} Payroll`,\r\n          currency: payrollData?.currency || 'USD',\r\n          amount: parseFloat(totalAmount.toFixed(2)),\r\n          project: '',\r\n          projectTask: '',\r\n          account: user.vendorAC ? `${user.name} [${user.vendorAC}]` : user.name\r\n        })\r\n      }\r\n    })\r\n\r\n    // Add entity payroll tax rows for each entity\r\n    const entityTaxRows: MonthlyAllocationItem[] = []\r\n    const entitySocialSecurityRows: MonthlyAllocationItem[] = []\r\n    Object.entries(groupedByEntity).forEach(([entity, entityUsers]) => {\r\n      const monthKey = `${selectedYear}-${selectedMonth}`\r\n      \r\n      // Find the entity configuration to get account codes\r\n      const entityConfig = entities.find((e: Entity) => e.name === entity)\r\n      const taxAccountCode = entityConfig?.taxAccount || ''\r\n      const ssAccountCode = entityConfig?.ssAccount || ''\r\n      \r\n      // Calculate totals for this entity\r\n      let totalEmployeeTax = 0\r\n      let totalEmployerTax = 0\r\n      let totalSocialSecurity = 0\r\n      let entityCurrency = 'USD' // Default currency\r\n      \r\n      entityUsers.forEach(user => {\r\n        const payrollData = user.payrollDataByMonth?.[monthKey]\r\n        if (payrollData) {\r\n          totalEmployeeTax += payrollData?.employeeTax || 0\r\n          totalEmployerTax += payrollData?.employerTax || 0\r\n          totalSocialSecurity += payrollData?.socialSecurity || 0\r\n          // Use the currency of the first user with payroll data\r\n          if (!entityCurrency || entityCurrency === 'USD') {\r\n            entityCurrency = payrollData?.currency || 'USD'\r\n          }\r\n        }\r\n      })\r\n      \r\n      // Add entity payroll tax row\r\n      const totalTaxAmount = (totalEmployeeTax + totalEmployerTax) * -1\r\n      if (totalEmployeeTax > 0 || totalEmployerTax > 0) {\r\n        entityTaxRows.push({\r\n          id: `entity-tax-${entity}-${monthKey}`,\r\n          name: entity,\r\n          code: taxAccountCode,\r\n          description: `${entity} Payroll Tax ${MONTHS[selectedMonth]} ${selectedYear}`,\r\n          currency: entityCurrency,\r\n          amount: parseFloat(totalTaxAmount.toFixed(2)),\r\n          project: '',\r\n          projectTask: '',\r\n          account: taxAccountCode ? `${entity} Payroll Tax [${taxAccountCode}]` : entity\r\n        })\r\n      }\r\n      \r\n      // Add entity social security row\r\n      const socialSecurityAmount = totalSocialSecurity * -1\r\n      if (totalSocialSecurity > 0) {\r\n        entitySocialSecurityRows.push({\r\n          id: `entity-ss-${entity}-${monthKey}`,\r\n          name: entity,\r\n          code: ssAccountCode,\r\n          description: `${entity} Social Security ${MONTHS[selectedMonth]} ${selectedYear}`,\r\n          currency: entityCurrency,\r\n          amount: parseFloat(socialSecurityAmount.toFixed(2)),\r\n          project: '',\r\n          projectTask: '',\r\n          account: ssAccountCode ? `${entity} Social Security [${ssAccountCode}]` : entity\r\n        })\r\n      }\r\n    })\r\n\r\n    return [...existingAllocationRows, ...payrollRows, ...entityTaxRows, ...entitySocialSecurityRows]\r\n  }, [monthlyAllocation, users, selectedMonth, selectedYear, activeProjects, isUserActiveInSelectedMonth, allocations, projects])\r\n\r\n  const getContrastColor = (hex: string) => {\r\n    const r = parseInt(hex.slice(1, 3), 16)\r\n    const g = parseInt(hex.slice(3, 5), 16)\r\n    const b = parseInt(hex.slice(5, 7), 16)\r\n    const brightness = (r * 299 + g * 587 + b * 114) / 1000\r\n    return brightness > 128 ? \"#000\" : \"#fff\"\r\n  }\r\n\r\n  // Export functions\r\n  const exportToExcel = (data: any[], filename: string) => {\r\n    const worksheet = XLSX.utils.json_to_sheet(data)\r\n    const workbook = XLSX.utils.book_new()\r\n    XLSX.utils.book_append_sheet(workbook, worksheet, 'Sheet1')\r\n    XLSX.writeFile(workbook, `${filename}.xlsx`)\r\n  }\r\n\r\n  const exportMainTable = () => {\r\n    const exportData = users.map(user => {\r\n      const monthKey = `${selectedYear}-${selectedMonth}`\r\n      const payrollData = user.payrollDataByMonth?.[monthKey]\r\n      const fringeData = user.fringeDataByMonth?.[monthKey]\r\n      const projectData = user.projectDataByMonth?.[monthKey] || {}\r\n      \r\n      const row: any = {\r\n        Name: user.name,\r\n        Department: user.department,\r\n        Entity: user.entity || '',\r\n        Currency: payrollData?.currency || 'USD',\r\n        'Net Salary': payrollData?.netSalary || 0,\r\n        'Social Security': payrollData?.socialSecurity || 0,\r\n        'Employee Tax': payrollData?.employeeTax || 0,\r\n        'Employer Tax': payrollData?.employerTax || 0,\r\n        'Housing': payrollData?.housing || 0,\r\n        'Other Benefits': payrollData?.otherBenefits || 0,\r\n        'Annual Leave': fringeData?.annualLeave || 0,\r\n        'Sick Leave': fringeData?.sickLeave || 0,\r\n        'Public Holidays': fringeData?.publicHolidays || 0,\r\n        'Working Days': fringeData?.workingDays || 0,\r\n        'Daily Rate': payrollData?.netSalary && fringeData?.workingDays ? (payrollData.netSalary / fringeData.workingDays).toFixed(2) : '0.00'\r\n      }\r\n      \r\n      // Add project columns - respect showPercentage state\r\n      activeProjects.forEach(project => {\r\n        if (showPercentage) {\r\n          // Calculate percentage for export\r\n          const totalProjectHours = activeProjects.reduce((total, p) => total + (projectData[p.id] || 0), 0)\r\n          const projectHours = projectData[project.id] || 0\r\n          const percentage = totalProjectHours > 0 ? (projectHours / totalProjectHours * 100).toFixed(1) : '0.0'\r\n          row[project.name] = `${percentage}%`\r\n        } else {\r\n          // Export raw values\r\n          row[project.name] = projectData[project.id] || 0\r\n        }\r\n      })\r\n      \r\n      return row\r\n    })\r\n    \r\n    exportToExcel(exportData, `Actual_Allocation_${MONTHS[selectedMonth]}_${selectedYear}_${showPercentage ? 'Percentage' : 'Values'}`)\r\n  }\r\n\r\n  const exportMonthlyTable = () => {\r\n    const exportData = filteredMonthlyAllocation.map(item => {\r\n      // Split account into name and code\r\n      const accountName = item.account.split(' [')[0]\r\n      const accountCode = item.account.includes(' [') ? item.account.split(' [')[1].replace(']', '') : ''\r\n      \r\n      // Find the user associated with this allocation item for percentage calculation\r\n      const user = users.find(u => u.name === item.name)\r\n      let exportValue = item.amount\r\n      \r\n      // If percentage view is active and this is a user allocation (not payroll/tax/ss rows), calculate percentage\r\n      if (showPercentage && user && item.project) {\r\n        const monthKey = `${selectedYear}-${selectedMonth}`\r\n        const projectData = user.projectDataByMonth?.[monthKey] || {}\r\n        const totalProjectHours = activeProjects.reduce((total, p) => total + (projectData[p.id] || 0), 0)\r\n        const projectHours = projectData[item.project] || 0\r\n        const percentage = totalProjectHours > 0 ? (projectHours / totalProjectHours * 100).toFixed(1) : '0.0'\r\n        exportValue = parseFloat(percentage) // Export the percentage value\r\n      }\r\n      \r\n      return {\r\n        'Account Name': accountName,\r\n        'Account Code': accountCode,\r\n        Description: item.description,\r\n        Currency: item.currency,\r\n        'Amount/Percentage': showPercentage && user && item.project ? \r\n          `${exportValue}%` : exportValue,\r\n        Project: item.project,\r\n        'Project Task': item.projectTask\r\n      }\r\n    })\r\n    \r\n    exportToExcel(exportData, `Monthly_Allocation_${MONTHS[selectedMonth]}_${selectedYear}_${showPercentage ? 'Percentage' : 'Values'}`)\r\n  }\r\n\r\n  return (\r\n    <main className=\"min-h-screen bg-background\">\r\n      <Navigation currentPage=\"/actual-allocation\" />\r\n      <div className=\"space-y-4 p-6\">\r\n      </div>\r\n\r\n      <div className=\"flex justify-between items-center mb-4\">\r\n        <h2 className=\"text-lg font-semibold text-gray-800\">Payroll Allocation</h2>\r\n        <div className=\"flex gap-3 items-center\">\r\n          {/* Month/Year Selectors */}\r\n          <div className=\"flex gap-2 items-center\">\r\n            <select\r\n              value={selectedMonth}\r\n              onChange={(e) => updateMonthYear(Number(e.target.value), selectedYear)}\r\n              className=\"border border-gray-300 rounded px-2 py-1 text-sm\"\r\n            >\r\n              {MONTHS.map((month, idx) => (\r\n                <option key={idx} value={idx}>{month}</option>\r\n              ))}\r\n            </select>\r\n            <select\r\n              value={selectedYear}\r\n              onChange={(e) => updateMonthYear(selectedMonth, Number(e.target.value))}\r\n              className=\"border border-gray-300 rounded px-2 py-1 text-sm\"\r\n            >\r\n              {[2023, 2024, 2025, 2026, 2027].map(year => (\r\n                <option key={year} value={year}>{year}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          \r\n          {/* Lock and View Controls */}\r\n          <div className=\"flex gap-2 items-center\">\r\n            {isClient && isAdmin() && (\r\n              <Button\r\n                onClick={toggleLock}\r\n                variant={isLocked ? \"destructive\" : \"outline\"}\r\n                size=\"sm\"\r\n                className=\"font-medium\"\r\n              >\r\n                {isLocked ? \" Locked\" : \" Lock\"}\r\n              </Button>\r\n            )}\r\n            {isClient && (\r\n              <Button\r\n                onClick={() => setShowPercentage(!showPercentage)}\r\n                variant={showPercentage ? \"default\" : \"outline\"}\r\n                size=\"sm\"\r\n                className=\"font-medium\"\r\n              >\r\n                {showPercentage ? \" Values\" : \" % View\"}\r\n              </Button>\r\n            )}\r\n            <Button\r\n              onClick={exportMainTable}\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              className=\"font-medium\"\r\n            >\r\n               Export\r\n            </Button>\r\n            <Button\r\n              onClick={() => {\r\n                const user = getCurrentUser()\r\n                if (user) {\r\n                  clearCurrentUser()\r\n                  window.location.href = \"/login\"\r\n                }\r\n              }}\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n            >\r\n              Logout\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"overflow-x-auto\">\r\n        <table className=\"w-full border-collapse border border-gray-300 text-xs\">\r\n          <thead>\r\n            <tr>\r\n              <th className=\"border border-gray-300 p-1 bg-gray-100 w-32\">Name</th>\r\n              <th className=\"border border-gray-300 p-1 bg-gray-100 w-32\">Department</th>\r\n              <th className=\"border border-gray-300 p-1 bg-gray-100 text-center\" colSpan={7}>Payroll</th>\r\n              <th className=\"border border-gray-300 p-1 bg-gray-100 text-center\" colSpan={5}>Fringe</th>\r\n              <th className=\"border border-gray-300 p-1 bg-gray-100 text-center\" colSpan={activeProjects.length + 1}>Projects</th>\r\n            </tr>\r\n            <tr>\r\n              <th className=\"border border-gray-300 p-1 bg-gray-50 w-32 text-xs text-muted-foreground\"></th>\r\n              <th className=\"border border-gray-300 p-1 bg-gray-50 w-32 text-xs text-muted-foreground\"></th>\r\n              {/* Payroll columns */}\r\n              <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Currency</th>\r\n              <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Net Salary <span style={{fontSize: '10px', opacity: 0.7}}>[631 0001]</span></th>\r\n              <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Social Security <span style={{fontSize: '10px', opacity: 0.7}}>[635 1001]</span></th>\r\n              <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Employee Tax <span style={{fontSize: '10px', opacity: 0.7}}>[620 1005]</span></th>\r\n              <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Employer Tax <span style={{fontSize: '10px', opacity: 0.7}}>[620 1005]</span></th>\r\n              <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Housing <span style={{fontSize: '10px', opacity: 0.7}}>[635 4001]</span></th>\r\n              <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Other Benefits <span style={{fontSize: '10px', opacity: 0.7}}>[602 4001]</span></th>\r\n              {/* Fringe columns */}\r\n              <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Working Days</th>\r\n              <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Annual Leave</th>\r\n              <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Sick Leave</th>\r\n              <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Public Holidays</th>\r\n              <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Daily Rate</th>\r\n              {/* Project columns */}\r\n              {activeProjects.map(project => (\r\n                <th key={project.id} className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\" style={{ backgroundColor: project.color + '20', color: '#000' }}>\r\n                  {project.name}\r\n                </th>\r\n              ))}\r\n              <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Total</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {Object.entries(groupedByEntity).map(([entity, entityUsers]) => {\r\n              // Calculate total payroll amounts for this entity\r\n              const monthKey = `${selectedYear}-${selectedMonth}`\r\n              const entityTotals = entityUsers.reduce((totals, user) => {\r\n                const payrollData = user.payrollDataByMonth?.[monthKey]\r\n                if (payrollData) {\r\n                  totals.netSalary += payrollData.netSalary || 0\r\n                  totals.socialSecurity += payrollData.socialSecurity || 0\r\n                  totals.employeeTax += payrollData.employeeTax || 0\r\n                  totals.employerTax += payrollData.employerTax || 0\r\n                  totals.housing += payrollData.housing || 0\r\n                  totals.otherBenefits += payrollData.otherBenefits || 0\r\n                }\r\n                return totals\r\n              }, {\r\n                netSalary: 0,\r\n                socialSecurity: 0,\r\n                employeeTax: 0,\r\n                employerTax: 0,\r\n                housing: 0,\r\n                otherBenefits: 0\r\n              })\r\n              \r\n              const grandTotal = entityTotals.netSalary + entityTotals.socialSecurity + entityTotals.employeeTax + \r\n                               entityTotals.employerTax + entityTotals.housing + entityTotals.otherBenefits\r\n              \r\n              return (\r\n              <React.Fragment key={entity}>\r\n                <tr>\r\n                  <td className=\"border border-gray-300 p-1 font-semibold text-xs text-gray-800 bg-cyan-200\">\r\n                    {entity}\r\n                  </td>\r\n                  <td className=\"border border-gray-300 p-1 font-semibold text-xs text-gray-800 bg-cyan-200 text-right\">\r\n                    ({grandTotal.toFixed(2)})\r\n                  </td>\r\n                  <td className=\"border border-gray-300 p-1 bg-cyan-200\"></td>\r\n                  <td className=\"border border-gray-300 p-1 bg-cyan-200\"></td>\r\n                  <td className=\"border border-gray-300 p-1 bg-cyan-200\"></td>\r\n                  <td className=\"border border-gray-300 p-1 bg-cyan-200\"></td>\r\n                  <td className=\"border border-gray-300 p-1 bg-cyan-200\"></td>\r\n                  <td className=\"border border-gray-300 p-1 bg-cyan-200\"></td>\r\n                  <td className=\"border border-gray-300 p-1 bg-cyan-200\"></td>\r\n                  <td className=\"border border-gray-300 p-1 bg-cyan-200\"></td>\r\n                  <td className=\"border border-gray-300 p-1 bg-cyan-200\"></td>\r\n                  <td className=\"border border-gray-300 p-1 bg-cyan-200\"></td>\r\n                  <td className=\"border border-gray-300 p-1 bg-cyan-200\"></td>\r\n                  <td className=\"border border-gray-300 p-1 bg-cyan-200\"></td>\r\n                  {/* Project average percentages */}\r\n                  {activeProjects.map(project => {\r\n                    // Calculate average percentage for this entity and project across ALL users\r\n                    const userPercentages = entityUsers.map(user => {\r\n                      const projectData = user.projectDataByMonth?.[monthKey] || {}\r\n                      const totalHours = activeProjects.reduce((total, p) => total + (projectData[p.id] || 0), 0)\r\n                      const projectHours = projectData[project.id] || 0\r\n                      return totalHours > 0 ? (projectHours / totalHours * 100) : 0\r\n                    })\r\n                    \r\n                    const avgPercentage = userPercentages.length > 0 \r\n                      ? userPercentages.reduce((sum, percentage) => sum + percentage, 0) / userPercentages.length\r\n                      : 0\r\n                    \r\n                    return (\r\n                      <td key={project.id} className=\"border border-gray-300 p-1 bg-cyan-200\">\r\n                        <div className=\"w-full text-xs text-center font-medium\">\r\n                          {showPercentage && avgPercentage > 0 ? avgPercentage.toFixed(1) + '%' : ''}\r\n                        </div>\r\n                      </td>\r\n                    )\r\n                  })}\r\n                  <td className=\"border border-gray-300 p-1 bg-cyan-200\"></td>\r\n                </tr>\r\n                {entityUsers.map((user) => {\r\n                  const monthKey = `${selectedYear}-${selectedMonth}`\r\n                  const payrollData = user.payrollDataByMonth?.[monthKey]\r\n                  const fringeData = user.fringeDataByMonth?.[monthKey]\r\n                  const projectData = user.projectDataByMonth?.[monthKey] || {}\r\n                  \r\n                  return (\r\n                  <tr key={user.id}>\r\n                    <td className=\"border border-gray-300 p-0.5 w-32\">\r\n                      <span className=\"text-xs leading-tight\">{user.name}</span>\r\n                    </td>\r\n                    <td className=\"border border-gray-300 p-0.5 w-32\">\r\n                      <span className=\"text-xs leading-tight text-gray-600\">{user.department}</span>\r\n                    </td>\r\n                    {/* Payroll data - editable */}\r\n                    <td className=\"border border-gray-300 p-0.5\">\r\n                      <input\r\n                        type=\"text\"\r\n                        value={payrollData?.currency || \"\"}\r\n                        onChange={(e) => handleCellValueChange(user.id, \"currency\", e.target.value, \"payroll\")}\r\n                        className=\"w-full text-xs text-center border-0 bg-transparent focus:outline-none focus:ring-1 focus:ring-blue-500 rounded\"\r\n                        placeholder=\"USD\"\r\n                        disabled={isLocked}\r\n                        style={{ backgroundColor: isLocked ? '#f3f4f6' : 'transparent' }}\r\n                      />\r\n                    </td>\r\n                    <td className=\"border border-gray-300 p-0.5\">\r\n                      <input\r\n                        type=\"number\"\r\n                        value={payrollData?.netSalary || \"\"}\r\n                        onChange={(e) => handleCellValueChange(user.id, \"netSalary\", e.target.value, \"payroll\")}\r\n                        className=\"w-full text-xs text-right border-0 bg-transparent focus:outline-none focus:ring-1 focus:ring-blue-500 rounded\"\r\n                        placeholder=\"0\"\r\n                        disabled={isLocked}\r\n                        style={{ backgroundColor: isLocked ? '#f3f4f6' : 'transparent' }}\r\n                      />\r\n                    </td>\r\n                    <td className=\"border border-gray-300 p-0.5\">\r\n                      <input\r\n                        type=\"number\"\r\n                        value={payrollData?.socialSecurity || \"\"}\r\n                        onChange={(e) => handleCellValueChange(user.id, \"socialSecurity\", e.target.value, \"payroll\")}\r\n                        className=\"w-full text-xs text-right border-0 bg-transparent focus:outline-none focus:ring-1 focus:ring-blue-500 rounded\"\r\n                        placeholder=\"0\"\r\n                        disabled={isLocked}\r\n                        style={{ backgroundColor: isLocked ? '#f3f4f6' : 'transparent' }}\r\n                      />\r\n                    </td>\r\n                    <td className=\"border border-gray-300 p-0.5\">\r\n                      <input\r\n                        type=\"number\"\r\n                        value={payrollData?.employeeTax || \"\"}\r\n                        onChange={(e) => handleCellValueChange(user.id, \"employeeTax\", e.target.value, \"payroll\")}\r\n                        className=\"w-full text-xs text-right border-0 bg-transparent focus:outline-none focus:ring-1 focus:ring-blue-500 rounded\"\r\n                        placeholder=\"0\"\r\n                        disabled={isLocked}\r\n                        style={{ backgroundColor: isLocked ? '#f3f4f6' : 'transparent' }}\r\n                      />\r\n                    </td>\r\n                    <td className=\"border border-gray-300 p-0.5\">\r\n                      <input\r\n                        type=\"number\"\r\n                        value={payrollData?.employerTax || \"\"}\r\n                        onChange={(e) => handleCellValueChange(user.id, \"employerTax\", e.target.value, \"payroll\")}\r\n                        className=\"w-full text-xs text-right border-0 bg-transparent focus:outline-none focus:ring-1 focus:ring-blue-500 rounded\"\r\n                        placeholder=\"0\"\r\n                        disabled={isLocked}\r\n                        style={{ backgroundColor: isLocked ? '#f3f4f6' : 'transparent' }}\r\n                      />\r\n                    </td>\r\n                    <td className=\"border border-gray-300 p-0.5\">\r\n                      <input\r\n                        type=\"number\"\r\n                        value={payrollData?.housing || \"\"}\r\n                        onChange={(e) => handleCellValueChange(user.id, \"housing\", e.target.value, \"payroll\")}\r\n                        className=\"w-full text-xs text-right border-0 bg-transparent focus:outline-none focus:ring-1 focus:ring-blue-500 rounded\"\r\n                        placeholder=\"0\"\r\n                        disabled={isLocked}\r\n                        style={{ backgroundColor: isLocked ? '#f3f4f6' : 'transparent' }}\r\n                      />\r\n                    </td>\r\n                    <td className=\"border border-gray-300 p-0.5\">\r\n                      <input\r\n                        type=\"number\"\r\n                        value={payrollData?.otherBenefits || \"\"}\r\n                        onChange={(e) => handleCellValueChange(user.id, \"otherBenefits\", e.target.value, \"payroll\")}\r\n                        className=\"w-full text-xs text-right border-0 bg-transparent focus:outline-none focus:ring-1 focus:ring-blue-500 rounded\"\r\n                        placeholder=\"0\"\r\n                        disabled={isLocked}\r\n                        style={{ backgroundColor: isLocked ? '#f3f4f6' : 'transparent' }}\r\n                      />\r\n                    </td>\r\n                    {/* Fringe data - editable */}\r\n                    <td className=\"border border-gray-300 p-0.5 bg-gray-50\">\r\n                      <div className=\"w-full text-xs text-center font-medium\">\r\n                        {fringeData?.workingDays || 0}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"border border-gray-300 p-0.5\">\r\n                      <input\r\n                        type=\"number\"\r\n                        value={fringeData?.annualLeave || \"\"}\r\n                        onChange={(e) => handleCellValueChange(user.id, \"annualLeave\", e.target.value, \"fringe\")}\r\n                        className=\"w-full text-xs text-center border-0 bg-transparent focus:outline-none focus:ring-1 focus:ring-blue-500 rounded\"\r\n                        placeholder=\"0\"\r\n                        disabled={isLocked}\r\n                        style={{ backgroundColor: isLocked ? '#f3f4f6' : 'transparent' }}\r\n                      />\r\n                    </td>\r\n                    <td className=\"border border-gray-300 p-0.5\">\r\n                      <input\r\n                        type=\"number\"\r\n                        value={fringeData?.sickLeave || \"\"}\r\n                        onChange={(e) => handleCellValueChange(user.id, \"sickLeave\", e.target.value, \"fringe\")}\r\n                        className=\"w-full text-xs text-center border-0 bg-transparent focus:outline-none focus:ring-1 focus:ring-blue-500 rounded\"\r\n                        placeholder=\"0\"\r\n                        disabled={isLocked}\r\n                        style={{ backgroundColor: isLocked ? '#f3f4f6' : 'transparent' }}\r\n                      />\r\n                    </td>\r\n                    <td className=\"border border-gray-300 p-0.5\">\r\n                      <input\r\n                        type=\"number\"\r\n                        value={fringeData?.publicHolidays || \"\"}\r\n                        onChange={(e) => handleCellValueChange(user.id, \"publicHolidays\", e.target.value, \"fringe\")}\r\n                        className=\"w-full text-xs text-center border-0 bg-transparent focus:outline-none focus:ring-1 focus:ring-blue-500 rounded\"\r\n                        placeholder=\"0\"\r\n                        disabled={isLocked}\r\n                        style={{ backgroundColor: isLocked ? '#f3f4f6' : 'transparent' }}\r\n                      />\r\n                    </td>\r\n                    <td className=\"border border-gray-300 p-0.5 bg-gray-50\">\r\n                      <div className=\"w-full text-xs text-right font-medium\">\r\n                        {payrollData?.netSalary && fringeData?.workingDays \r\n                          ? (payrollData.netSalary / fringeData.workingDays).toFixed(2)\r\n                          : \"0.00\"\r\n                        }\r\n                      </div>\r\n                    </td>\r\n                    {/* Project data - editable */}\r\n                    {activeProjects.map(project => {\r\n                      const totalProjectHours = activeProjects.reduce((total, p) => total + (projectData[p.id] || 0), 0)\r\n                      const projectHours = projectData[project.id] || 0\r\n                      const percentage = totalProjectHours > 0 ? (projectHours / totalProjectHours * 100).toFixed(1) : '0.0'\r\n                      \r\n                      return (\r\n                        <td key={project.id} className=\"border border-gray-300 p-0.5\" style={{ backgroundColor: project.color + '10' }}>\r\n                          {showPercentage ? (\r\n                            <div className=\"w-full text-xs text-center\" style={{ backgroundColor: isLocked ? '#f3f4f6' : '#f9fafb' }}>\r\n                              {percentage}%\r\n                            </div>\r\n                          ) : (\r\n                            <input\r\n                              type=\"number\"\r\n                              value={projectData[project.id] || \"\"}\r\n                              onChange={(e) => handleCellValueChange(user.id, project.id, e.target.value, \"project\", project.id)}\r\n                              className=\"w-full text-xs text-center border-0 bg-transparent focus:outline-none focus:ring-1 focus:ring-blue-500 rounded\"\r\n                              placeholder=\"0\"\r\n                              min=\"0\"\r\n                              max=\"100\"\r\n                              disabled={isLocked}\r\n                              style={{ backgroundColor: isLocked ? '#f3f4f6' : 'transparent' }}\r\n                            />\r\n                          )}\r\n                        </td>\r\n                      )\r\n                    })}\r\n                    <td className=\"border border-gray-300 p-0.5 bg-gray-50\">\r\n                      <div className=\"w-full text-xs text-right font-medium\">\r\n                        {showPercentage ? \r\n                          \"100%\" :\r\n                          activeProjects.reduce((total, project) => total + (projectData[project.id] || 0), 0)\r\n                        }\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                  )\r\n                })}\r\n              </React.Fragment>\r\n              )\r\n            })}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {users.length === 0 && (\r\n        <div className=\"text-center py-8 text-gray-500\">\r\n          No staff data available. Please add staff members first.\r\n        </div>\r\n      )}\r\n\r\n      {/* Monthly Allocation Table */}\r\n      <div className=\"mt-8\">\r\n        <div className=\"flex justify-between items-center mb-4\">\r\n          <h2 className=\"text-lg font-semibold text-gray-800\">Monthly Allocation</h2>\r\n          <Button\r\n            onClick={exportMonthlyTable}\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            className=\"font-medium\"\r\n          >\r\n             Export to Excel\r\n          </Button>\r\n        </div>\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"w-full border-collapse border border-gray-300 text-xs\">\r\n            <thead>\r\n              <tr>\r\n                <th className=\"border border-gray-300 p-1 bg-gray-100 text-center\" colSpan={7}>Monthly Allocation</th>\r\n              </tr>\r\n              <tr>\r\n                <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Account Name</th>\r\n                <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Account Code</th>\r\n                <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Description</th>\r\n                <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Currency</th>\r\n                <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Amount</th>\r\n                <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Project</th>\r\n                <th className=\"border border-gray-300 p-1 bg-gray-50 text-xs text-muted-foreground\">Project Task</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {filteredMonthlyAllocation.map((item) => {\r\n                // Split account into name and code\r\n                const accountName = item.account.split(' [')[0]\r\n                const accountCode = item.account.includes(' [') ? item.account.split(' [')[1].replace(']', '') : ''\r\n                \r\n                return (\r\n                <tr key={item.id}>\r\n                  <td className=\"border border-gray-300 p-0.5\">\r\n                    <span className=\"text-xs leading-tight\">\r\n                      {accountName}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"border border-gray-300 p-0.5\">\r\n                    <span className=\"text-xs leading-tight\">\r\n                      {accountCode}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"border border-gray-300 p-0.5\">\r\n                    <div className=\"w-full text-xs text-center\" style={{ backgroundColor: isLocked ? '#f3f4f6' : '#f9fafb' }}>\r\n                      {item.description}\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"border border-gray-300 p-0.5\">\r\n                    <input\r\n                      type=\"text\"\r\n                      value={item.currency}\r\n                      onChange={(e) => handleMonthlyAllocationChange(item.id, 'currency', e.target.value)}\r\n                      className=\"w-full text-xs text-center border-0 bg-transparent focus:outline-none focus:ring-1 focus:ring-blue-500 rounded\"\r\n                      placeholder=\"USD\"\r\n                      disabled={isLocked}\r\n                      style={{ backgroundColor: isLocked ? '#f3f4f6' : 'transparent' }}\r\n                    />\r\n                  </td>\r\n                  <td className=\"border border-gray-300 p-0.5\">\r\n                    <div className=\"w-full text-xs text-right\" style={{ backgroundColor: isLocked ? '#f3f4f6' : '#f9fafb' }}>\r\n                      {item.amount.toFixed(2)}\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"border border-gray-300 p-0.5\">\r\n                    <div className=\"w-full text-xs text-center\" style={{ backgroundColor: isLocked ? '#f3f4f6' : '#f9fafb' }}>\r\n                      {item.project}\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"border border-gray-300 p-0.5\">\r\n                    <input\r\n                      type=\"text\"\r\n                      value={item.projectTask}\r\n                      onChange={(e) => handleMonthlyAllocationChange(item.id, 'projectTask', e.target.value)}\r\n                      className=\"w-full text-xs text-center border-0 bg-transparent focus:outline-none focus:ring-1 focus:ring-blue-500 rounded\"\r\n                      placeholder=\"Enter task\"\r\n                      disabled={isLocked}\r\n                      style={{ backgroundColor: isLocked ? '#f3f4f6' : 'transparent' }}\r\n                    />\r\n                  </td>\r\n                </tr>\r\n                )\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}