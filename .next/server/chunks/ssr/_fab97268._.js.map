{"version":3,"sources":["../../../../node_modules/.pnpm/next%4016.0.3_react-dom%4019.2.0_react%4019.2.0__react%4019.2.0/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../lib/storage.ts","../../../../app/login/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","// User-specific storage utilities\r\nexport interface UserData {\r\n  projects: any[]\r\n  users: any[]\r\n  allocations: any[]\r\n  positions: any[]\r\n  entities: any[]\r\n  startMonth?: number\r\n  startYear?: number\r\n  systemUsers?: SystemUser[] // Global system users (for login)\r\n}\r\n\r\nexport interface SystemUser {\r\n  id: string\r\n  email: string\r\n  name: string\r\n  password: string\r\n  role: 'admin' | 'editor' | 'viewer'\r\n  isActive: boolean\r\n  createdAt: string\r\n}\r\n\r\nconst STORAGE_KEYS = {\r\n  CURRENT_USER: \"sola-current-user\",\r\n  USER_DATA_PREFIX: \"sola-user-data-\",\r\n  SYSTEM_USERS: \"sola-system-users\", // Global user registry\r\n} as const\r\n\r\nexport function getSystemUsers(): SystemUser[] {\r\n  if (typeof window === 'undefined') return []\r\n  const data = localStorage.getItem(STORAGE_KEYS.SYSTEM_USERS)\r\n  return data ? JSON.parse(data) : []\r\n}\r\n\r\nexport function setSystemUsers(users: SystemUser[]): void {\r\n  if (typeof window === 'undefined') return\r\n  localStorage.setItem(STORAGE_KEYS.SYSTEM_USERS, JSON.stringify(users))\r\n}\r\n\r\nexport function addSystemUser(user: Omit<SystemUser, 'id' | 'createdAt'>): SystemUser {\r\n  const users = getSystemUsers()\r\n  const newUser: SystemUser = {\r\n    ...user,\r\n    id: `system-user-${Date.now()}`,\r\n    createdAt: new Date().toISOString(),\r\n  }\r\n  setSystemUsers([...users, newUser])\r\n  return newUser\r\n}\r\n\r\nexport function updateSystemUser(id: string, updates: Partial<SystemUser>): void {\r\n  const users = getSystemUsers()\r\n  const updated = users.map(u => u.id === id ? { ...u, ...updates } : u)\r\n  setSystemUsers(updated)\r\n}\r\n\r\nexport function deleteSystemUser(id: string): void {\r\n  const users = getSystemUsers()\r\n  setSystemUsers(users.filter(u => u.id !== id))\r\n}\r\n\r\nexport function authenticateUser(email: string, password: string): SystemUser | null {\r\n  const users = getSystemUsers()\r\n  return users.find(u => u.email === email && u.password === password && u.isActive) || null\r\n}\r\n\r\nexport function getCurrentUser(): string | null {\r\n  if (typeof window === 'undefined') return null\r\n  return localStorage.getItem(STORAGE_KEYS.CURRENT_USER)\r\n}\r\n\r\nexport function getCurrentSystemUser(): SystemUser | null {\r\n  const email = getCurrentUser()\r\n  if (!email) return null\r\n  const users = getSystemUsers()\r\n  return users.find(u => u.email === email) || null\r\n}\r\n\r\nexport function setCurrentUser(email: string): void {\r\n  if (typeof window === 'undefined') return\r\n  localStorage.setItem(STORAGE_KEYS.CURRENT_USER, email)\r\n}\r\n\r\nexport function clearCurrentUser(): void {\r\n  if (typeof window === 'undefined') return\r\n  localStorage.removeItem(STORAGE_KEYS.CURRENT_USER)\r\n}\r\n\r\nexport function getUserData(email: string): UserData {\r\n  if (typeof window === 'undefined') return { projects: [], users: [], allocations: [], positions: [], entities: [] }\r\n  \r\n  const data = localStorage.getItem(STORAGE_KEYS.USER_DATA_PREFIX + email)\r\n  return data ? JSON.parse(data) : { projects: [], users: [], allocations: [], positions: [], entities: [] }\r\n}\r\n\r\nexport function setUserData(email: string, data: Partial<UserData>): void {\r\n  if (typeof window === 'undefined') return\r\n  \r\n  const existing = getUserData(email)\r\n  const updated = { ...existing, ...data }\r\n  localStorage.setItem(STORAGE_KEYS.USER_DATA_PREFIX + email, JSON.stringify(updated))\r\n}\r\n\r\nexport function clearUserData(email: string): void {\r\n  if (typeof window === 'undefined') return\r\n  localStorage.removeItem(STORAGE_KEYS.USER_DATA_PREFIX + email)\r\n}\r\n\r\n// Convenience functions that work with the current user\r\nexport function getCurrentUserData(): UserData {\r\n  const currentUser = getCurrentUser()\r\n  if (!currentUser) return { projects: [], users: [], allocations: [], positions: [], entities: [] }\r\n  return getUserData(currentUser)\r\n}\r\n\r\nexport function setCurrentUserData(data: Partial<UserData>): void {\r\n  const currentUser = getCurrentUser()\r\n  if (!currentUser) return\r\n  setUserData(currentUser, data)\r\n}\r\n","\"use client\"\r\n\r\nimport React, { useState } from \"react\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { authenticateUser, setCurrentUser, getSystemUsers, addSystemUser, updateSystemUser } from \"@/lib/storage\"\r\n\r\nexport default function LoginPage() {\r\n  const [email, setEmail] = useState(\"\")\r\n  const [password, setPassword] = useState(\"\")\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const [error, setError] = useState(\"\")\r\n\r\n  // Initialize default admin if no users exist\r\n  React.useEffect(() => {\r\n    const users = getSystemUsers()\r\n    console.log(\"Current users:\", users)\r\n    \r\n    // Check if admin exists and has password\r\n    const adminUser = users.find(u => u.email === \"admin@sola.com\")\r\n    \r\n    if (!adminUser) {\r\n      // Create default admin user\r\n      const newAdmin = addSystemUser({\r\n        email: \"admin@sola.com\",\r\n        name: \"System Administrator\",\r\n        password: \"admin123\",\r\n        role: \"admin\",\r\n        isActive: true,\r\n      })\r\n      console.log(\"Created admin user:\", newAdmin)\r\n    } else if (!adminUser.password) {\r\n      // Update existing admin to have password\r\n      updateSystemUser(adminUser.id, { password: \"admin123\" })\r\n      console.log(\"Updated admin user with password\")\r\n    }\r\n    \r\n    // Update any other users without passwords to have default password\r\n    users.forEach(user => {\r\n      if (!user.password && user.email !== \"admin@sola.com\") {\r\n        updateSystemUser(user.id, { password: \"password123\" })\r\n      }\r\n    })\r\n  }, [])\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    setIsLoading(true)\r\n    setError(\"\")\r\n\r\n    // Authenticate user\r\n    const user = authenticateUser(email, password)\r\n    console.log(\"Authentication attempt:\", { email, password, user })\r\n    if (user) {\r\n      setCurrentUser(email)\r\n      window.location.href = \"/\"\r\n    } else {\r\n      setError(\"Invalid email or password\")\r\n    }\r\n\r\n    setIsLoading(false)\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4\">\r\n      <div className=\"w-full max-w-md\">\r\n        {/* Logo/Brand Area */}\r\n        <div className=\"text-center mb-8\">\r\n          <div className=\"inline-flex items-center justify-center w-16 h-16 bg-blue-600 rounded-2xl mb-4\">\r\n            <span className=\"text-white text-2xl font-bold\">S</span>\r\n          </div>\r\n          <h1 className=\"text-2xl font-bold text-gray-900\">Welcome to Sola</h1>\r\n          <p className=\"text-gray-600 mt-2\">Staff Allocation System</p>\r\n        </div>\r\n\r\n        {/* Login Form */}\r\n        <div className=\"bg-white rounded-2xl shadow-xl p-8\">\r\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n            <div>\r\n              <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Email\r\n              </label>\r\n              <input\r\n                id=\"email\"\r\n                type=\"email\"\r\n                value={email}\r\n                onChange={(e) => setEmail(e.target.value)}\r\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors\"\r\n                placeholder=\"Enter your email\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Password\r\n              </label>\r\n              <input\r\n                id=\"password\"\r\n                type=\"password\"\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors\"\r\n                placeholder=\"Enter your password\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div className=\"flex items-center justify-between\">\r\n              <label className=\"flex items-center\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  className=\"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\r\n                />\r\n                <span className=\"ml-2 text-sm text-gray-600\">Remember me</span>\r\n              </label>\r\n              <a href=\"#\" className=\"text-sm text-blue-600 hover:text-blue-700 transition-colors\">\r\n                Forgot password?\r\n              </a>\r\n            </div>\r\n\r\n            {error && (\r\n              <div className=\"p-3 bg-red-50 border border-red-200 rounded-lg text-red-600 text-sm\">\r\n                {error}\r\n              </div>\r\n            )}\r\n\r\n            <Button\r\n              type=\"submit\"\r\n              className=\"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors\"\r\n              disabled={isLoading}\r\n            >\r\n              {isLoading ? \"Signing in...\" : \"Sign in\"}\r\n            </Button>\r\n          </form>\r\n\r\n          <div className=\"mt-6 text-center\">\r\n            <p className=\"text-sm text-gray-600\">\r\n              Don't have an account?{\" \"}\r\n              <a href=\"#\" className=\"text-blue-600 hover:text-blue-700 font-medium transition-colors\">\r\n                Contact administrator\r\n              </a>\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"mt-8 text-center text-sm text-gray-500\">\r\n          <p>&copy; 2024 Sola Staff Allocation System. All rights reserved.</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":["module","exports","require","vendored","ReactJsxRuntime"],"mappings":"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","ignoreList":[0]}