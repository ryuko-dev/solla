{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sinan/sola/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\r\nimport { twMerge } from 'tailwind-merge'\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sinan/sola/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\r\nimport { Slot } from '@radix-ui/react-slot'\r\nimport { cva, type VariantProps } from 'class-variance-authority'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\r\n        destructive:\r\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\r\n        outline:\r\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\r\n        secondary:\r\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\r\n        ghost:\r\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\r\n        link: 'text-primary underline-offset-4 hover:underline',\r\n      },\r\n      size: {\r\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\r\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\r\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\r\n        icon: 'size-9',\r\n        'icon-sm': 'size-8',\r\n        'icon-lg': 'size-10',\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: 'default',\r\n      size: 'default',\r\n    },\r\n  },\r\n)\r\n\r\nfunction Button({\r\n  className,\r\n  variant,\r\n  size,\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<'button'> &\r\n  VariantProps<typeof buttonVariants> & {\r\n    asChild?: boolean\r\n  }) {\r\n  const Comp = asChild ? Slot : 'button'\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"button\"\r\n      className={cn(buttonVariants({ variant, size, className }))}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Button, buttonVariants }\r\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,0KAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,2KAAI,GAAG;IAE9B,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KAnBS"}},
    {"offset": {"line": 87, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sinan/sola/components/allocation-cell.tsx"],"sourcesContent":["\"use client\"\r\nimport { useState } from \"react\"\r\n\r\ninterface AllocationCellProps {\r\n  userId: string\r\n  monthIndex: number\r\n  allocations?: any[]\r\n  onEdit?: (id: string) => void\r\n  onSaveEdit?: (id: string, percentage: number) => void\r\n  onRemove?: (id: string) => void\r\n  onEmptyCellClick?: () => void\r\n  project?: any\r\n  projects?: any[]\r\n  month?: any\r\n  userEnded?: boolean\r\n}\r\n\r\nexport function AllocationCell({\r\n  userId,\r\n  monthIndex,\r\n  allocations = [],\r\n  onEdit,\r\n  onSaveEdit,\r\n  onRemove,\r\n  onEmptyCellClick,\r\n  projects = [],\r\n  userEnded = false,\r\n}: AllocationCellProps) {\r\n  const [isHovering, setIsHovering] = useState(false)\r\n  const [editingId, setEditingId] = useState<string | null>(null)\r\n  const [editValue, setEditValue] = useState(0)\r\n\r\n  // Calculate total allocated percentage for this cell\r\n  const totalAllocated = allocations.reduce((sum, a) => sum + (a.percentage || 0), 0)\r\n  const freePercentage = Math.max(0, 100 - totalAllocated)\r\n\r\n  // Determine border class based on allocation level\r\n  const allocationBorderClass =\r\n    totalAllocated === 100\r\n      ? \"border-2 border-green-500\"\r\n      : totalAllocated > 100\r\n      ? \"border-2 border-red-500\"\r\n      : \"\"\r\n\r\n  const handleClick = () => {\r\n    if (freePercentage > 0 && onEmptyCellClick) {\r\n      onEmptyCellClick()\r\n    }\r\n  }\r\n\r\n  return (\r\n    <td\r\n      data-user-id={userId}\r\n      data-month={monthIndex}\r\n      className={`w-32 border-r border-b border-border bg-background px-1 py-0.5 min-h-8 transition-colors relative ${\r\n        userEnded\r\n          ? \"cursor-not-allowed bg-gray-100\"\r\n          : freePercentage > 0 && onEmptyCellClick\r\n          ? \"cursor-pointer hover:bg-muted/50\"\r\n          : \"hover:bg-muted/30\"\r\n      }`}\r\n      onMouseEnter={() => !userEnded && freePercentage > 0 && setIsHovering(true)}\r\n      onMouseLeave={() => setIsHovering(false)}\r\n      onClick={userEnded ? undefined : handleClick}\r\n    >\r\n      <div className=\"flex flex-col h-full gap-0.5\">\r\n        {/* Allocation bars row */}\r\n        <div className=\"flex items-center flex-1\">\r\n          <div className={`flex w-full h-4 rounded overflow-hidden bg-gray-100 ${allocationBorderClass}`}>\r\n            {userEnded ? (\r\n              <div className=\"w-full h-full flex items-center justify-center text-[8px] font-semibold text-gray-500 bg-gray-200\">\r\n                ended\r\n              </div>\r\n            ) : (\r\n              allocations.map((allocation) => {\r\n              const project = projects.find((p) => p.id === allocation.projectId)\r\n              console.log(\"[v0] AllocationCell rendering bar:\", {\r\n                allocationId: allocation.id,\r\n                projectId: allocation.projectId,\r\n                projectColor: project?.color,\r\n              })\r\n                // Keep total bar size constant: if allocations exceed 100%,\r\n                // normalize segments so they still fit into a 100% width bar.\r\n                const capacity = totalAllocated > 100 ? totalAllocated : 100\r\n                const width = Math.max(\r\n                  0,\r\n                  Math.min(100, ((allocation.percentage || 0) / capacity) * 100),\r\n                )\r\n\r\n                return (\r\n                  <div\r\n                    key={allocation.id}\r\n                    className=\"h-full text-[8px] flex items-center justify-center font-semibold relative group cursor-pointer text-white\"\r\n                    style={{\r\n                      backgroundColor: project?.color || \"#999\",\r\n                      width: `${width}%`,\r\n                      minWidth: width > 0 ? \"8%\" : undefined,\r\n                    }}\r\n                    onClick={(e) => {\r\n                      e.stopPropagation()\r\n                      onEdit?.(allocation.id)\r\n                    }}\r\n                    title={`${project?.name ?? \"Project\"} - ${allocation.percentage || 0}%`}\r\n                  >\r\n                    {allocation.percentage || 0}%\r\n                    <button\r\n                      onClick={(e) => {\r\n                        e.stopPropagation()\r\n                        onRemove?.(allocation.id)\r\n                      }}\r\n                      className=\"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity\"\r\n                    >\r\n                      ×\r\n                    </button>\r\n                  </div>\r\n                )\r\n              })\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        \r\n        {!userEnded && isHovering && freePercentage > 0 && (\r\n          <div className=\"absolute inset-0 flex items-center justify-center bg-primary/10 rounded text-[9px] text-primary font-medium pointer-events-none\">\r\n            Click to select position\r\n          </div>\r\n        )}\r\n      </div>\r\n    </td>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;;;AADA;;AAiBO,SAAS,eAAe,EAC7B,MAAM,EACN,UAAU,EACV,cAAc,EAAE,EAChB,MAAM,EACN,UAAU,EACV,QAAQ,EACR,gBAAgB,EAChB,WAAW,EAAE,EACb,YAAY,KAAK,EACG;;IACpB,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAC7C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAgB;IAC1D,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAE3C,qDAAqD;IACrD,MAAM,iBAAiB,YAAY,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,CAAC,EAAE,UAAU,IAAI,CAAC,GAAG;IACjF,MAAM,iBAAiB,KAAK,GAAG,CAAC,GAAG,MAAM;IAEzC,mDAAmD;IACnD,MAAM,wBACJ,mBAAmB,MACf,8BACA,iBAAiB,MACjB,4BACA;IAEN,MAAM,cAAc;QAClB,IAAI,iBAAiB,KAAK,kBAAkB;YAC1C;QACF;IACF;IAEA,qBACE,6LAAC;QACC,gBAAc;QACd,cAAY;QACZ,WAAW,CAAC,kGAAkG,EAC5G,YACI,mCACA,iBAAiB,KAAK,mBACtB,qCACA,qBACJ;QACF,cAAc,IAAM,CAAC,aAAa,iBAAiB,KAAK,cAAc;QACtE,cAAc,IAAM,cAAc;QAClC,SAAS,YAAY,YAAY;kBAEjC,cAAA,6LAAC;YAAI,WAAU;;8BAEb,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAI,WAAW,CAAC,oDAAoD,EAAE,uBAAuB;kCAC3F,0BACC,6LAAC;4BAAI,WAAU;sCAAoG;;;;;mCAInH,YAAY,GAAG,CAAC,CAAC;4BACjB,MAAM,UAAU,SAAS,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,WAAW,SAAS;4BAClE,QAAQ,GAAG,CAAC,sCAAsC;gCAChD,cAAc,WAAW,EAAE;gCAC3B,WAAW,WAAW,SAAS;gCAC/B,cAAc,SAAS;4BACzB;4BACE,4DAA4D;4BAC5D,8DAA8D;4BAC9D,MAAM,WAAW,iBAAiB,MAAM,iBAAiB;4BACzD,MAAM,QAAQ,KAAK,GAAG,CACpB,GACA,KAAK,GAAG,CAAC,KAAK,AAAC,CAAC,WAAW,UAAU,IAAI,CAAC,IAAI,WAAY;4BAG5D,qBACE,6LAAC;gCAEC,WAAU;gCACV,OAAO;oCACL,iBAAiB,SAAS,SAAS;oCACnC,OAAO,GAAG,MAAM,CAAC,CAAC;oCAClB,UAAU,QAAQ,IAAI,OAAO;gCAC/B;gCACA,SAAS,CAAC;oCACR,EAAE,eAAe;oCACjB,SAAS,WAAW,EAAE;gCACxB;gCACA,OAAO,GAAG,SAAS,QAAQ,UAAU,GAAG,EAAE,WAAW,UAAU,IAAI,EAAE,CAAC,CAAC;;oCAEtE,WAAW,UAAU,IAAI;oCAAE;kDAC5B,6LAAC;wCACC,SAAS,CAAC;4CACR,EAAE,eAAe;4CACjB,WAAW,WAAW,EAAE;wCAC1B;wCACA,WAAU;kDACX;;;;;;;+BApBI,WAAW,EAAE;;;;;wBAyBxB;;;;;;;;;;;gBAML,CAAC,aAAa,cAAc,iBAAiB,mBAC5C,6LAAC;oBAAI,WAAU;8BAAkI;;;;;;;;;;;;;;;;;AAO3J;GAjHgB;KAAA"}},
    {"offset": {"line": 219, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sinan/sola/components/project-manager.tsx"],"sourcesContent":["\"use client\"\r\nimport { useState } from \"react\"\r\nimport type { Project, Position } from \"../lib/types\"\r\n\r\ninterface ProjectManagerProps {\r\n  projects: Project[]\r\n  positions: Position[]\r\n  months: string[]\r\n  startMonth?: number\r\n  startYear?: number\r\n  onAddProject: (project: Project) => void\r\n  onUpdateProject: (projectId: string, updates: Partial<Project>) => void\r\n  onDeleteProject: (projectId: string) => void\r\n  onUpdatePositions: (positions: Position[]) => void\r\n}\r\n\r\ninterface PositionBudget {\r\n  id: string\r\n  name: string\r\n  budgets: Record<number, number>\r\n}\r\n\r\nexport function ProjectManager({\r\n  projects,\r\n  positions = [],\r\n  months,\r\n  startMonth = 0,\r\n  startYear = 2024,\r\n  onAddProject,\r\n  onUpdateProject,\r\n  onDeleteProject,\r\n  onUpdatePositions,\r\n}: ProjectManagerProps) {\r\n  const [showCreateModal, setShowCreateModal] = useState(false)\r\n  const [editingProjectId, setEditingProjectId] = useState<string | null>(null)\r\n  const [newProjectName, setNewProjectName] = useState(\"\")\r\n  const [selectedColor, setSelectedColor] = useState(\"#3B82F6\")\r\n  const [positionBudgets, setPositionBudgets] = useState<PositionBudget[]>([])\r\n  const [projectStartMonth, setProjectStartMonth] = useState(0)\r\n  const [projectStartYear, setProjectStartYear] = useState(2024)\r\n  const [projectEndMonth, setProjectEndMonth] = useState(0)\r\n  const [projectEndYear, setProjectEndYear] = useState(2024)\r\n  const [monthTablePage, setMonthTablePage] = useState(0)\r\n\r\n  const MONTHS = [\r\n    \"January\",\r\n    \"February\",\r\n    \"March\",\r\n    \"April\",\r\n    \"May\",\r\n    \"June\",\r\n    \"July\",\r\n    \"August\",\r\n    \"September\",\r\n    \"October\",\r\n    \"November\",\r\n    \"December\",\r\n  ]\r\n  const YEARS = Array.from({ length: 10 }, (_, i) => 2024 + i)\r\n\r\n  const COLORS = [\r\n    \"#3B82F6\", // Blue\r\n    \"#10B981\", // Green\r\n    \"#F59E0B\", // Amber\r\n    \"#8B5CF6\", // Purple\r\n    \"#EC4899\", // Pink\r\n    \"#06B6D4\", // Cyan\r\n    \"#EF4444\", // Red\r\n    \"#14B8A6\", // Teal\r\n  ]\r\n\r\n  const toGlobalMonthIndex = (month: number, year: number) => {\r\n    return (year - 2024) * 12 + month\r\n  }\r\n\r\n  const fromGlobalMonthIndex = (globalIndex: number) => {\r\n    return {\r\n      month: globalIndex % 12,\r\n      year: 2024 + Math.floor(globalIndex / 12),\r\n    }\r\n  }\r\n\r\n  const projectDurationMonths = (() => {\r\n    const startIdx = toGlobalMonthIndex(projectStartMonth, projectStartYear)\r\n    const endIdx = toGlobalMonthIndex(projectEndMonth, projectEndYear)\r\n    return Math.max(1, endIdx - startIdx + 1)\r\n  })()\r\n\r\n  const getDisplayMonths = () => {\r\n    const startIdx = toGlobalMonthIndex(projectStartMonth, projectStartYear)\r\n    const endIdx = toGlobalMonthIndex(projectEndMonth, projectEndYear)\r\n    const pageStart = startIdx + monthTablePage * 12\r\n    const pageEnd = Math.min(pageStart + 12, endIdx + 1)\r\n\r\n    const displayMonths = []\r\n    for (let i = pageStart; i < pageEnd; i++) {\r\n      const { month, year } = fromGlobalMonthIndex(i)\r\n      displayMonths.push({\r\n        month,\r\n        year,\r\n        displayName: `${MONTHS[month].slice(0, 3)} ${year.toString().slice(-2)}`,\r\n        globalIndex: i,\r\n      })\r\n    }\r\n    return displayMonths\r\n  }\r\n\r\n  const displayMonths = getDisplayMonths()\r\n  const maxPages = Math.ceil(projectDurationMonths / 12)\r\n\r\n  const handleCreateProject = () => {\r\n    if (!newProjectName.trim()) return\r\n\r\n    const newProject: Project = {\r\n      id: `proj-${Date.now()}`,\r\n      name: newProjectName,\r\n      color: selectedColor,\r\n      startMonth: projectStartMonth,\r\n      startYear: projectStartYear,\r\n      endMonth: projectEndMonth,\r\n      endYear: projectEndYear,\r\n    }\r\n\r\n    onAddProject(newProject)\r\n\r\n    const newPositions: Position[] = []\r\n    const startIdx = toGlobalMonthIndex(projectStartMonth, projectStartYear)\r\n    const endIdx = toGlobalMonthIndex(projectEndMonth, projectEndYear)\r\n\r\n    positionBudgets.forEach((positionBudget) => {\r\n      displayMonths.forEach((displayMonth, displayIdx) => {\r\n        const percentage = positionBudget.budgets[displayMonth.globalIndex] || 0\r\n        if (percentage > 0) {\r\n          newPositions.push({\r\n            id: `pos-${newProject.id}-${positionBudget.id}-${displayMonth.globalIndex}`,\r\n            projectId: newProject.id,\r\n            monthIndex: displayMonth.globalIndex,\r\n            percentage,\r\n            allocated: 0,\r\n            name: positionBudget.name,\r\n          })\r\n        }\r\n      })\r\n    })\r\n\r\n    if (newPositions.length > 0) {\r\n      onUpdatePositions([...positions, ...newPositions])\r\n    }\r\n\r\n    setNewProjectName(\"\")\r\n    setSelectedColor(\"#3B82F6\")\r\n    setPositionBudgets([])\r\n    setProjectStartMonth(0)\r\n    setProjectStartYear(2024)\r\n    setProjectEndMonth(0)\r\n    setProjectEndYear(2024)\r\n    setMonthTablePage(0)\r\n    setShowCreateModal(false)\r\n  }\r\n\r\n  const handleEditProject = (projectId: string) => {\r\n    setEditingProjectId(projectId)\r\n    const project = projects.find((p) => p.id === projectId)\r\n    if (project) {\r\n      setNewProjectName(project.name)\r\n      setSelectedColor(project.color)\r\n      setProjectStartMonth(project.startMonth ?? 0)\r\n      setProjectStartYear(project.startYear ?? 2024)\r\n      setProjectEndMonth(project.endMonth ?? 0)\r\n      setProjectEndYear(project.endYear ?? 2024)\r\n      setMonthTablePage(0)\r\n\r\n      const projectPositions = positions.filter((p) => p.projectId === projectId)\r\n      const positionMap = new Map<string, PositionBudget>()\r\n\r\n      projectPositions.forEach((p) => {\r\n        const name = p.name || \"Unnamed Position\"\r\n        if (!positionMap.has(name)) {\r\n          positionMap.set(name, {\r\n            id: `${name}-${Date.now()}`,\r\n            name,\r\n            budgets: {},\r\n          })\r\n        }\r\n        const pos = positionMap.get(name)!\r\n        pos.budgets[p.monthIndex] = p.percentage\r\n      })\r\n\r\n      setPositionBudgets(Array.from(positionMap.values()))\r\n    }\r\n  }\r\n\r\n  const handleSaveEditProject = () => {\r\n    if (!editingProjectId || !newProjectName.trim()) return\r\n\r\n    const projectId = editingProjectId // Store before clearing state\r\n\r\n    console.log(\"[v0] Saving project with dates:\", {\r\n      projectId,\r\n      startMonth: projectStartMonth,\r\n      startYear: projectStartYear,\r\n      endMonth: projectEndMonth,\r\n      endYear: projectEndYear,\r\n    })\r\n\r\n    console.log(\"[v0] Saving project with color:\", {\r\n      projectId,\r\n      selectedColor,\r\n    })\r\n\r\n    console.log(\"[v0] About to call onUpdateProject with:\", {\r\n      projectId,\r\n      name: newProjectName,\r\n      color: selectedColor,\r\n      startMonth: projectStartMonth,\r\n      startYear: projectStartYear,\r\n      endMonth: projectEndMonth,\r\n      endYear: projectEndYear,\r\n    })\r\n\r\n    // Update positions BEFORE updating the project to avoid triggering another project update\r\n    const existingPositions = positions.filter((p) => p.projectId === projectId)\r\n    const newPositions: Position[] = []\r\n\r\n    positionBudgets.forEach((positionBudget) => {\r\n      displayMonths.forEach((displayMonth) => {\r\n        const percentage = positionBudget.budgets[displayMonth.globalIndex] || 0\r\n        if (percentage > 0) {\r\n          const existingPos = existingPositions.find(\r\n            (p) => p.monthIndex === displayMonth.globalIndex && p.name === positionBudget.name,\r\n          )\r\n          newPositions.push({\r\n            id: existingPos?.id || `pos-${projectId}-${positionBudget.id}-${displayMonth.globalIndex}`,\r\n            projectId,\r\n            monthIndex: displayMonth.globalIndex,\r\n            percentage,\r\n            allocated: existingPos?.allocated || 0,\r\n            name: positionBudget.name,\r\n          })\r\n        }\r\n      })\r\n    })\r\n\r\n    const otherPositions = positions.filter((p) => p.projectId !== projectId)\r\n    onUpdatePositions([...otherPositions, ...newPositions])\r\n\r\n    // Now update the project\r\n    onUpdateProject(projectId, {\r\n      name: newProjectName,\r\n      color: selectedColor,\r\n      startMonth: projectStartMonth,\r\n      startYear: projectStartYear,\r\n      endMonth: projectEndMonth,\r\n      endYear: projectEndYear,\r\n    })\r\n\r\n    // Close the edit modal immediately so the project list re-renders with the new color\r\n    setEditingProjectId(null)\r\n\r\n    setNewProjectName(\"\")\r\n    setSelectedColor(\"#3B82F6\")\r\n    setPositionBudgets([])\r\n    setProjectStartMonth(0)\r\n    setProjectStartYear(2024)\r\n    setProjectEndMonth(0)\r\n    setProjectEndYear(2024)\r\n    setMonthTablePage(0)\r\n  }\r\n\r\n  const handleAddPositionLine = () => {\r\n    setPositionBudgets([\r\n      ...positionBudgets,\r\n      {\r\n        id: `pos-${Date.now()}`,\r\n        name: \"New Position\",\r\n        budgets: {},\r\n      },\r\n    ])\r\n  }\r\n\r\n  const handleDeletePositionLine = (id: string) => {\r\n    setPositionBudgets(positionBudgets.filter((p) => p.id !== id))\r\n  }\r\n\r\n  const handleUpdatePositionName = (id: string, name: string) => {\r\n    setPositionBudgets(positionBudgets.map((p) => (p.id === id ? { ...p, name } : p)))\r\n  }\r\n\r\n  const handleUpdatePositionBudget = (id: string, globalMonthIndex: number, value: number) => {\r\n    setPositionBudgets(\r\n      positionBudgets.map((p) => (p.id === id ? { ...p, budgets: { ...p.budgets, [globalMonthIndex]: value } } : p)),\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex flex-wrap gap-4 items-center\">\r\n        {projects.map((project) => {\r\n          // Determine if text should be white or black based on background color brightness\r\n          const getContrastColor = (hex: string) => {\r\n            const r = parseInt(hex.slice(1, 3), 16)\r\n            const g = parseInt(hex.slice(3, 5), 16)\r\n            const b = parseInt(hex.slice(5, 7), 16)\r\n            const brightness = (r * 299 + g * 587 + b * 114) / 1000\r\n            return brightness > 128 ? \"#000\" : \"#fff\"\r\n          }\r\n          const textColor = getContrastColor(project.color)\r\n          \r\n          return (\r\n            <div\r\n              key={project.id}\r\n              className=\"flex items-center gap-3 px-4 py-2 rounded border border-border\"\r\n              style={{ backgroundColor: project.color, color: textColor }}\r\n            >\r\n              <span className=\"text-sm font-medium\">{project.name}</span>\r\n              <button\r\n                onClick={() => handleEditProject(project.id)}\r\n                className=\"ml-2 px-2 py-1 text-xs bg-white/20 rounded hover:bg-white/30 transition-colors\"\r\n                style={{ color: textColor }}\r\n              >\r\n                Edit\r\n              </button>\r\n            </div>\r\n          )\r\n        })}\r\n        <button\r\n          onClick={() => setShowCreateModal(true)}\r\n          className=\"px-4 py-2 bg-primary text-primary-foreground rounded font-medium hover:bg-primary/90 transition-colors text-sm\"\r\n        >\r\n          + New Project\r\n        </button>\r\n      </div>\r\n\r\n      {(showCreateModal || editingProjectId) && (\r\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-card p-6 rounded-lg border border-border shadow-lg max-w-5xl w-full mx-4 max-h-[90vh] overflow-y-auto\">\r\n            <h2 className=\"text-lg font-semibold text-foreground mb-4\">\r\n              {editingProjectId ? \"Edit Project\" : \"Create New Project\"}\r\n            </h2>\r\n\r\n            <div className=\"mb-6 grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <div>\r\n                <label className=\"text-xs font-medium text-muted-foreground mb-2 block\">Project Name</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={newProjectName}\r\n                  onChange={(e) => setNewProjectName(e.target.value)}\r\n                  className=\"border border-border rounded px-3 py-2 w-full text-sm bg-background text-foreground\"\r\n                  placeholder=\"Enter project name\"\r\n                  autoFocus\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"text-xs font-medium text-muted-foreground mb-2 block\">Project Color</label>\r\n                <div className=\"flex gap-2 flex-wrap\">\r\n                  {COLORS.map((color) => (\r\n                    <button\r\n                      key={color}\r\n                      onClick={() => {\r\n                        console.log(\"[v0] Color picker clicked, setting color to:\", color)\r\n                        setSelectedColor(color)\r\n                      }}\r\n                      className={`w-8 h-8 rounded transition-all ${selectedColor === color ? \"ring-2 ring-offset-2 ring-primary\" : \"hover:opacity-80\"}`}\r\n                      style={{ backgroundColor: color }}\r\n                      title={color}\r\n                    />\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"mb-6 grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n              <div>\r\n                <label className=\"text-xs font-medium text-muted-foreground mb-2 block\">Start Month</label>\r\n                <select\r\n                  value={projectStartMonth}\r\n                  onChange={(e) => setProjectStartMonth(Number(e.target.value))}\r\n                  className=\"border border-border rounded px-3 py-2 w-full text-sm bg-background text-foreground\"\r\n                >\r\n                  {MONTHS.map((month, idx) => (\r\n                    <option key={idx} value={idx}>\r\n                      {month}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"text-xs font-medium text-muted-foreground mb-2 block\">Start Year</label>\r\n                <select\r\n                  value={projectStartYear}\r\n                  onChange={(e) => setProjectStartYear(Number(e.target.value))}\r\n                  className=\"border border-border rounded px-3 py-2 w-full text-sm bg-background text-foreground\"\r\n                >\r\n                  {YEARS.map((year) => (\r\n                    <option key={year} value={year}>\r\n                      {year}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"text-xs font-medium text-muted-foreground mb-2 block\">End Month</label>\r\n                <select\r\n                  value={projectEndMonth}\r\n                  onChange={(e) => setProjectEndMonth(Number(e.target.value))}\r\n                  className=\"border border-border rounded px-3 py-2 w-full text-sm bg-background text-foreground\"\r\n                >\r\n                  {MONTHS.map((month, idx) => (\r\n                    <option key={idx} value={idx}>\r\n                      {month}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"text-xs font-medium text-muted-foreground mb-2 block\">End Year</label>\r\n                <select\r\n                  value={projectEndYear}\r\n                  onChange={(e) => setProjectEndYear(Number(e.target.value))}\r\n                  className=\"border border-border rounded px-3 py-2 w-full text-sm bg-background text-foreground\"\r\n                >\r\n                  {YEARS.map((year) => (\r\n                    <option key={year} value={year}>\r\n                      {year}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"mb-6\">\r\n              <div className=\"flex justify-between items-center mb-2\">\r\n                <label className=\"text-xs font-medium text-muted-foreground\">\r\n                  Positions by Month (%) - Page {monthTablePage + 1} of {maxPages}\r\n                </label>\r\n                <div className=\"flex gap-2 items-center\">\r\n                  <button\r\n                    onClick={() => setMonthTablePage(Math.max(0, monthTablePage - 1))}\r\n                    disabled={monthTablePage === 0}\r\n                    className=\"px-3 py-1 text-xs bg-primary text-primary-foreground rounded hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n                  >\r\n                    ← Prev 12\r\n                  </button>\r\n                  <button\r\n                    onClick={() => setMonthTablePage(Math.min(maxPages - 1, monthTablePage + 1))}\r\n                    disabled={monthTablePage >= maxPages - 1}\r\n                    className=\"px-3 py-1 text-xs bg-primary text-primary-foreground rounded hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n                  >\r\n                    Next 12 →\r\n                  </button>\r\n                  <button\r\n                    onClick={handleAddPositionLine}\r\n                    className=\"px-3 py-1 text-xs bg-primary text-primary-foreground rounded hover:bg-primary/90 transition-colors\"\r\n                  >\r\n                    + Add Position\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              <div className=\"border border-border rounded overflow-x-auto\">\r\n                <table className=\"w-full text-sm\">\r\n                  <thead className=\"bg-muted border-b border-border\">\r\n                    <tr>\r\n                      <th className=\"px-4 py-2 text-left font-semibold text-muted-foreground min-w-32\">\r\n                        Position Name\r\n                      </th>\r\n                      {displayMonths.map((displayMonth) => (\r\n                        <th\r\n                          key={displayMonth.globalIndex}\r\n                          className=\"px-4 py-2 text-center font-semibold text-muted-foreground min-w-20\"\r\n                        >\r\n                          {displayMonth.displayName}\r\n                        </th>\r\n                      ))}\r\n                      <th className=\"px-4 py-2 text-center font-semibold text-muted-foreground w-10\">Action</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {positionBudgets.length === 0 ? (\r\n                      <tr>\r\n                        <td colSpan={displayMonths.length + 2} className=\"px-4 py-8 text-center text-muted-foreground\">\r\n                          No positions yet. Click \"Add Position\" to create one.\r\n                        </td>\r\n                      </tr>\r\n                    ) : (\r\n                      positionBudgets.map((positionBudget) => (\r\n                        <tr key={positionBudget.id} className=\"border-t border-border hover:bg-muted/50\">\r\n                          <td className=\"px-4 py-2 border-r border-border\">\r\n                            <input\r\n                              type=\"text\"\r\n                              value={positionBudget.name}\r\n                              onChange={(e) => handleUpdatePositionName(positionBudget.id, e.target.value)}\r\n                              className=\"w-full px-2 py-1 border border-border rounded text-foreground bg-card\"\r\n                              placeholder=\"e.g., Senior Developer\"\r\n                            />\r\n                          </td>\r\n                          {displayMonths.map((displayMonth) => (\r\n                            <td\r\n                              key={displayMonth.globalIndex}\r\n                              className=\"px-4 py-2 border-r border-border last:border-r-0 bg-background\"\r\n                            >\r\n                              <input\r\n                                type=\"number\"\r\n                                min=\"0\"\r\n                                max=\"999\"\r\n                                value={positionBudget.budgets[displayMonth.globalIndex] || \"\"}\r\n                                onChange={(e) =>\r\n                                  handleUpdatePositionBudget(\r\n                                    positionBudget.id,\r\n                                    displayMonth.globalIndex,\r\n                                    e.target.value ? Number(e.target.value) : 0,\r\n                                  )\r\n                                }\r\n                                className=\"w-full px-2 py-1 text-center border border-border rounded text-foreground bg-card\"\r\n                                placeholder=\"0\"\r\n                              />\r\n                            </td>\r\n                          ))}\r\n                          <td className=\"px-4 py-2 text-center\">\r\n                            <button\r\n                              onClick={() => handleDeletePositionLine(positionBudget.id)}\r\n                              className=\"px-2 py-1 text-xs bg-destructive text-destructive-foreground rounded hover:bg-destructive/90 transition-colors\"\r\n                            >\r\n                              ✕\r\n                            </button>\r\n                          </td>\r\n                        </tr>\r\n                      ))\r\n                    )}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex gap-2 justify-end\">\r\n              <button\r\n                onClick={() => {\r\n                  setShowCreateModal(false)\r\n                  setEditingProjectId(null)\r\n                  setNewProjectName(\"\")\r\n                  setSelectedColor(\"#3B82F6\")\r\n                  setPositionBudgets([])\r\n                  setProjectStartMonth(0)\r\n                  setProjectStartYear(2024)\r\n                  setProjectEndMonth(0)\r\n                  setProjectEndYear(2024)\r\n                  setMonthTablePage(0)\r\n                }}\r\n                className=\"px-4 py-2 bg-muted text-muted-foreground rounded font-medium hover:bg-muted/80 transition-colors text-sm\"\r\n              >\r\n                Cancel\r\n              </button>\r\n              {editingProjectId && (\r\n                <button\r\n                  onClick={() => {\r\n                    if (\r\n                      window.confirm(\"Are you sure you want to delete this project? All positions will be removed.\")\r\n                    ) {\r\n                      onDeleteProject(editingProjectId)\r\n                      setEditingProjectId(null)\r\n                      setNewProjectName(\"\")\r\n                      setSelectedColor(\"#3B82F6\")\r\n                      setPositionBudgets([])\r\n                      setProjectStartMonth(0)\r\n                      setProjectStartYear(2024)\r\n                      setProjectEndMonth(0)\r\n                      setProjectEndYear(2024)\r\n                      setMonthTablePage(0)\r\n                    }\r\n                  }}\r\n                  className=\"px-4 py-2 bg-destructive text-destructive-foreground rounded font-medium hover:bg-destructive/90 transition-colors text-sm\"\r\n                >\r\n                  Delete Project\r\n                </button>\r\n              )}\r\n              <button\r\n                onClick={editingProjectId ? handleSaveEditProject : handleCreateProject}\r\n                className=\"px-4 py-2 bg-primary text-primary-foreground rounded font-medium hover:bg-primary/90 transition-colors text-sm\"\r\n              >\r\n                {editingProjectId ? \"Save Changes\" : \"Create Project\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1061, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sinan/sola/components/allocation-grid.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport React from \"react\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport type { Project, User, Allocation, Position } from \"../lib/types\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport { Button } from \"./ui/button\"\r\nimport { AllocationCell } from \"./allocation-cell\"\r\nimport { ProjectManager } from \"./project-manager\"\r\nimport { SelectPositionModal } from \"./select-position-modal\"\r\nimport { getCurrentUser, setCurrentUser, getCurrentUserData, setCurrentUserData } from \"../lib/storage\"\r\n\r\nconst STORAGE_KEYS = {\r\n  PROJECTS: 'sola-projects',\r\n  USERS: 'sola-users',\r\n  ALLOCATIONS: 'sola-allocations',\r\n  POSITIONS: 'sola-positions',\r\n}\r\n\r\nconst MONTHS = [\r\n  \"January\",\r\n  \"February\",\r\n  \"March\",\r\n  \"April\",\r\n  \"May\",\r\n  \"June\",\r\n  \"July\",\r\n  \"August\",\r\n  \"September\",\r\n  \"October\",\r\n  \"November\",\r\n  \"December\",\r\n]\r\nconst YEARS = Array.from({ length: 10 }, (_, i) => 2024 + i)\r\n\r\nexport function AllocationGrid() {\r\n  // Load data from local storage on component mount\r\n  const [projects, setProjects] = useState<Project[]>(() => {\r\n    if (typeof window !== 'undefined') {\r\n      console.log(\"[v0] Initial projects load from localStorage\")\r\n      const saved = localStorage.getItem(STORAGE_KEYS.PROJECTS)\r\n      return saved ? JSON.parse(saved) : []\r\n    }\r\n    return []\r\n  })\r\n\r\n  const [users, setUsers] = useState<User[]>(() => {\r\n    if (typeof window !== 'undefined') {\r\n      const saved = localStorage.getItem(STORAGE_KEYS.USERS)\r\n      return saved ? JSON.parse(saved) : [\r\n        { id: \"1\", name: \"John Doe\", department: \"Engineering\" },\r\n        { id: \"2\", name: \"Jane Smith\", department: \"Design\" },\r\n        { id: \"3\", name: \"Bob Johnson\", department: \"Product\" },\r\n      ]\r\n    }\r\n    return [\r\n      { id: \"1\", name: \"John Doe\", department: \"Engineering\" },\r\n      { id: \"2\", name: \"Jane Smith\", department: \"Design\" },\r\n      { id: \"3\", name: \"Bob Johnson\", department: \"Product\" },\r\n    ]\r\n  })\r\n\r\n  const [allocations, setAllocations] = useState<Allocation[]>(() => {\r\n    if (typeof window !== 'undefined') {\r\n      const saved = localStorage.getItem(STORAGE_KEYS.ALLOCATIONS)\r\n      return saved ? JSON.parse(saved) : []\r\n    }\r\n    return []\r\n  })\r\n\r\n  const [positions, setPositions] = useState<Position[]>(() => {\r\n    if (typeof window !== 'undefined') {\r\n      const saved = localStorage.getItem(STORAGE_KEYS.POSITIONS)\r\n      return saved ? JSON.parse(saved) : []\r\n    }\r\n    return []\r\n  })\r\n\r\n  // Save data to local storage whenever it changes\r\n  useEffect(() => {\r\n    if (typeof window !== 'undefined') {\r\n      console.log(\"[v0] Saving projects to localStorage:\", projects)\r\n      localStorage.setItem(STORAGE_KEYS.PROJECTS, JSON.stringify(projects))\r\n    }\r\n  }, [projects])\r\n\r\n  useEffect(() => {\r\n    if (typeof window !== 'undefined') {\r\n      localStorage.setItem(STORAGE_KEYS.USERS, JSON.stringify(users))\r\n    }\r\n  }, [users])\r\n\r\n  useEffect(() => {\r\n    if (typeof window !== 'undefined') {\r\n      localStorage.setItem(STORAGE_KEYS.ALLOCATIONS, JSON.stringify(allocations))\r\n    }\r\n  }, [allocations])\r\n\r\n  const [selectedMonth, setSelectedMonth] = useState<number | null>(null)\r\n\r\n  // Grid starting month/year (top-right selectors). Persist across refresh.\r\n  const [startMonth, setStartMonth] = useState(() => {\r\n    if (typeof window !== 'undefined') {\r\n      const saved = localStorage.getItem('sola-start-month')\r\n      return saved ? parseInt(saved, 10) : 0\r\n    }\r\n    return 0\r\n  })\r\n\r\n  const [startYear, setStartYear] = useState(() => {\r\n    if (typeof window !== 'undefined') {\r\n      const saved = localStorage.getItem('sola-start-year')\r\n      return saved ? parseInt(saved, 10) : 2024\r\n    }\r\n    return 2024\r\n  })\r\n\r\n  // Persist starting month/year when they change\r\n  useEffect(() => {\r\n    if (typeof window !== 'undefined') {\r\n      localStorage.setItem('sola-start-month', startMonth.toString())\r\n    }\r\n  }, [startMonth])\r\n\r\n  useEffect(() => {\r\n    if (typeof window !== 'undefined') {\r\n      localStorage.setItem('sola-start-year', startYear.toString())\r\n    }\r\n  }, [startYear])\r\n  const [editingId, setEditingId] = useState<string | null>(null)\r\n  const [editValue, setEditValue] = useState(0)\r\n  const [showUnallocatedModal, setShowUnallocatedModal] = useState(false)\r\n  const [pendingAllocation, setPendingAllocation] = useState<{ userId: string; monthIndex: number } | null>(null)\r\n  const [showUserModal, setShowUserModal] = useState(false)\r\n  const [editingUserId, setEditingUserId] = useState<string | null>(null)\r\n  const [editingUserName, setEditingUserName] = useState(\"\")\r\n  const [editingUserDept, setEditingUserDept] = useState(\"\")\r\n  const [editingUserStartDate, setEditingUserStartDate] = useState(\"\")\r\n  const [editingUserEndDate, setEditingUserEndDate] = useState(\"\")\r\n  const [selectedCellMonth, setSelectedCellMonth] = useState<number | null>(null)\r\n  const [selectedCellUser, setSelectedCellUser] = useState<string | null>(null)\r\n  const [showPositionModal, setShowPositionModal] = useState(false)\r\n\r\n  const addProject = (project: Project) => {\r\n    setProjects((prev) => [...prev, project])\r\n  }\r\n\r\n  const updateProject = (projectId: string, updates: Partial<Project>) => {\r\n    console.log(\"[v0] updateProject called:\", { projectId, updates })\r\n    console.trace(\"[v0] updateProject call stack\")\r\n    setProjects((prev) => {\r\n      const existing = prev.find((p) => p.id === projectId)\r\n      if (existing && Object.entries(updates).every(([key, value]) => existing[key as keyof Project] === value)) {\r\n        console.log(\"[v0] Skipping update: no actual changes detected\")\r\n        return prev\r\n      }\r\n      const next = prev.map((p) => (p.id === projectId ? { ...p, ...updates } : p))\r\n      console.log(\"[v0] projects after update:\", next)\r\n      return next\r\n    })\r\n  }\r\n\r\n  const deleteProject = (projectId: string) => {\r\n    setProjects((prev) => prev.filter((p) => p.id !== projectId))\r\n    setAllocations((prev) => prev.filter((a) => a.projectId !== projectId))\r\n  }\r\n\r\n  const addUser = () => {\r\n    setEditingUserId(null)\r\n    setEditingUserName(\"\")\r\n    setEditingUserDept(\"\")\r\n    setEditingUserStartDate(\"\")\r\n    setEditingUserEndDate(\"\")\r\n    setShowUserModal(true)\r\n  }\r\n\r\n  const editUser = (userId: string) => {\r\n    const user = users.find((u) => u.id === userId)\r\n    if (user) {\r\n      setEditingUserId(userId)\r\n      setEditingUserName(user.name)\r\n      setEditingUserDept(user.department)\r\n      setEditingUserStartDate(user.startDate || \"\")\r\n      setEditingUserEndDate(user.endDate || \"\")\r\n      setShowUserModal(true)\r\n    }\r\n  }\r\n\r\n  const saveUserChanges = () => {\r\n    if (!editingUserName.trim()) return\r\n\r\n    if (editingUserId) {\r\n      setUsers((prev) =>\r\n        prev.map((u) =>\r\n          u.id === editingUserId\r\n            ? {\r\n                ...u,\r\n                name: editingUserName,\r\n                department: editingUserDept,\r\n                startDate: editingUserStartDate || undefined,\r\n                endDate: editingUserEndDate || undefined,\r\n              }\r\n            : u,\r\n        ),\r\n      )\r\n    } else {\r\n      const newUser: User = {\r\n        id: `user-${Date.now()}`,\r\n        name: editingUserName,\r\n        department: editingUserDept,\r\n        startDate: editingUserStartDate || undefined,\r\n        endDate: editingUserEndDate || undefined,\r\n      }\r\n      setUsers((prev) => [...prev, newUser])\r\n    }\r\n\r\n    setShowUserModal(false)\r\n    setEditingUserId(null)\r\n    setEditingUserName(\"\")\r\n    setEditingUserDept(\"\")\r\n    setEditingUserStartDate(\"\")\r\n    setEditingUserEndDate(\"\")\r\n  }\r\n\r\n  const deleteUser = (userId: string) => {\r\n    setUsers((prev) => prev.filter((u) => u.id !== userId))\r\n    setAllocations((prev) => prev.filter((a) => a.userId !== userId))\r\n  }\r\n\r\n  const updatePositions = (newPositions: Position[]) => {\r\n    const updatedProjects = projects.map((project) => ({\r\n      ...project,\r\n      positions: newPositions.filter((p) => p.projectId === project.id),\r\n    }))\r\n    setProjects(updatedProjects)\r\n  }\r\n\r\n  const handleMonthClick = (monthIndex: number) => {\r\n    setSelectedMonth(selectedMonth === monthIndex ? null : monthIndex)\r\n  }\r\n\r\n  // Months shown in the grid. The globalIndex here MUST match how ProjectManager\r\n  // stores position.monthIndex: (year - 2024) * 12 + month.\r\n  const months = Array.from({ length: 12 }, (_, i) => {\r\n    const date = new Date(startYear, startMonth + i, 1)\r\n    const month = date.getMonth()\r\n    const year = date.getFullYear()\r\n    const globalIndex = (year - 2024) * 12 + month\r\n\r\n    return {\r\n      month,\r\n      year,\r\n      globalIndex,\r\n      display: `${MONTHS[month].slice(0, 3).toUpperCase()} ${String(year).slice(-2)}`,\r\n    }\r\n  })\r\n\r\n  const handleEmptyCellClick = (userId: string, monthIndex: number) => {\r\n    console.log(\"[v0] Empty cell clicked:\", { userId, monthIndex, selectedMonth })\r\n\r\n    // Respect user end date: do not allow new allocations after their end date\r\n    const user = users.find((u) => u.id === userId)\r\n    if (user?.endDate) {\r\n      const end = new Date(user.endDate)\r\n      if (!Number.isNaN(end.getTime())) {\r\n        const endMonth = end.getMonth() // 0-11\r\n        const endYear = end.getFullYear()\r\n        const endGlobalIndex = (endYear - 2024) * 12 + endMonth\r\n        if (monthIndex > endGlobalIndex) {\r\n          // After end date: block allocation\r\n          return\r\n        }\r\n      }\r\n    }\r\n\r\n    setSelectedCellUser(userId)\r\n    setSelectedCellMonth(monthIndex)\r\n    setShowPositionModal(true)\r\n  }\r\n\r\n  // Helper to check if a user is active for a given month\r\n  const isUserActiveInMonth = (userId: string, monthIndex: number): boolean => {\r\n    const user = users.find((u) => u.id === userId)\r\n    if (!user?.endDate) return true\r\n    const end = new Date(user.endDate)\r\n    if (Number.isNaN(end.getTime())) return true\r\n    const endMonth = end.getMonth() // 0-11\r\n    const endYear = end.getFullYear()\r\n    const endGlobalIndex = (endYear - 2024) * 12 + endMonth\r\n    return monthIndex <= endGlobalIndex\r\n  }\r\n\r\n  const handleAddAllocation = (projectId: string, positionName: string) => {\r\n    if (selectedCellUser && selectedCellMonth !== null) {\r\n      // Find the underlying position so we can link by positionId\r\n      const project = projects.find((p) => p.id === projectId)\r\n      const position = project?.positions?.find(\r\n        (pos) => pos.monthIndex === selectedCellMonth && pos.name === positionName,\r\n      )\r\n\r\n      // If we can't find the position or it has no budget, do nothing\r\n      if (!position || !position.percentage) {\r\n        return\r\n      }\r\n\r\n      // How much of this position is already allocated in this month (across all users)\r\n      const alreadyAllocated = allocations\r\n        .filter(\r\n          (a) =>\r\n            a.projectId === projectId &&\r\n            a.monthIndex === selectedCellMonth &&\r\n            (a.positionId === position.id || a.positionName === positionName),\r\n        )\r\n        .reduce((sum, a) => sum + (a.percentage || 0), 0)\r\n\r\n      const remaining = Math.max(0, position.percentage - alreadyAllocated)\r\n\r\n      // Nothing left to allocate\r\n      if (remaining <= 0) {\r\n        return\r\n      }\r\n\r\n      const newAllocation: Allocation = {\r\n        id: `alloc-${Date.now()}`,\r\n        userId: selectedCellUser,\r\n        projectId,\r\n        monthIndex: selectedCellMonth,\r\n        // By default, allocate all remaining budget for this position/month\r\n        percentage: remaining,\r\n        positionId: position?.id,\r\n        positionName,\r\n      }\r\n      setAllocations((prev) => [...prev, newAllocation])\r\n\r\n      // Update allocated amount in positions\r\n      setProjects((prev) =>\r\n        prev.map((p) =>\r\n          p.id === projectId\r\n            ? {\r\n                ...p,\r\n                positions: p.positions?.map((pos) =>\r\n                  pos.monthIndex === selectedCellMonth && pos.name === positionName\r\n                    ? { ...pos, allocated: (pos.allocated || 0) + remaining }\r\n                    : pos,\r\n                ),\r\n              }\r\n            : p,\r\n        ),\r\n      )\r\n\r\n      setShowPositionModal(false)\r\n      setSelectedCellUser(null)\r\n      setSelectedCellMonth(null)\r\n    }\r\n  }\r\n\r\n  const handleRemoveAllocation = (allocationId: string) => {\r\n    const allocation = allocations.find((a) => a.id === allocationId)\r\n    if (allocation) {\r\n      setProjects((prev) =>\r\n        prev.map((p) =>\r\n          p.id === allocation.projectId\r\n            ? {\r\n                ...p,\r\n                positions: p.positions?.map((pos) =>\r\n                  pos.monthIndex === allocation.monthIndex && pos.name === allocation.positionName\r\n                    ? { ...pos, allocated: Math.max(0, (pos.allocated || 0) - 1) }\r\n                    : pos,\r\n                ),\r\n              }\r\n            : p,\r\n        ),\r\n      )\r\n    }\r\n    setAllocations((prev) => prev.filter((a) => a.id !== allocationId))\r\n  }\r\n\r\n  const handleEditAllocation = (allocationId: string, newPercentage: number) => {\r\n    setAllocations((prev) => prev.map((a) => (a.id === allocationId ? { ...a, percentage: newPercentage } : a)))\r\n    setEditingId(null)\r\n    setEditValue(0)\r\n  }\r\n\r\n  // Only show users who are active for the current grid window.\r\n  // If a user has an endDate before the starting month/year, hide them.\r\n  const gridStartGlobalIndex = (startYear - 2024) * 12 + startMonth\r\n\r\n  const activeUsers = users.filter((user) => {\r\n    if (!user.endDate) return true\r\n\r\n    const end = new Date(user.endDate)\r\n    if (Number.isNaN(end.getTime())) return true\r\n\r\n    const endMonth = end.getMonth() // 0-11\r\n    const endYear = end.getFullYear()\r\n    const endGlobalIndex = (endYear - 2024) * 12 + endMonth\r\n\r\n    return endGlobalIndex >= gridStartGlobalIndex\r\n  })\r\n\r\n  const groupedUsers = Array.from(\r\n    activeUsers.reduce((acc, user) => {\r\n      if (!acc.has(user.department)) {\r\n        acc.set(user.department, [])\r\n      }\r\n      acc.get(user.department)!.push(user)\r\n      return acc\r\n    }, new Map<string, User[]>()),\r\n  ).map(([dept, deptUsers]) => ({\r\n    department: dept,\r\n    users: deptUsers,\r\n  }))\r\n\r\n  return (\r\n    <div className=\"space-y-4 p-6\">\r\n      <div className=\"flex justify-between items-start gap-4\">\r\n        <div>\r\n          <ProjectManager\r\n            projects={projects}\r\n            positions={projects.flatMap((p) => p.positions || [])}\r\n            months={MONTHS}\r\n            startMonth={startMonth}\r\n            startYear={startYear}\r\n            onAddProject={addProject}\r\n            onUpdateProject={updateProject}\r\n            onDeleteProject={deleteProject}\r\n            onUpdatePositions={updatePositions}\r\n          />\r\n        </div>\r\n        <div className=\"flex gap-4 items-end\">\r\n          <div className=\"space-y-2\">\r\n            <label className=\"block text-sm font-medium\">Starting Month</label>\r\n            <select\r\n              value={startMonth}\r\n              onChange={(e) => setStartMonth(Number.parseInt(e.target.value))}\r\n              className=\"border rounded px-2 py-1\"\r\n            >\r\n              {MONTHS.map((month, idx) => (\r\n                <option key={month} value={idx}>\r\n                  {month}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          <div className=\"space-y-2\">\r\n            <label className=\"block text-sm font-medium\">Starting Year</label>\r\n            <select\r\n              value={startYear}\r\n              onChange={(e) => setStartYear(Number.parseInt(e.target.value))}\r\n              className=\"border rounded px-2 py-1\"\r\n            >\r\n              {YEARS.map((year) => (\r\n                <option key={year} value={year}>\r\n                  {year}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"space-y-2 rounded-full\">\r\n        <div className=\"flex justify-between items-center\">\r\n          <h2 className=\"text-lg font-bold\">Staff Allocations</h2>\r\n          <div className=\"flex gap-2 items-center\">\r\n            <Button onClick={addUser} variant=\"default\" size=\"sm\">\r\n              + Add User\r\n            </Button>\r\n            <Button\r\n              onClick={() => {\r\n                localStorage.clear()\r\n                window.location.href = \"/login\"\r\n              }}\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              className=\"flex items-center gap-2\"\r\n            >\r\n              <svg\r\n                className=\"w-4 h-4\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                viewBox=\"0 0 24 24\"\r\n              >\r\n                <path\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                  strokeWidth={2}\r\n                  d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\"\r\n                />\r\n              </svg>\r\n              Logout\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"w-full border-collapse border border-gray-300\">\r\n            <thead>\r\n              <tr>\r\n                <th className=\"border border-gray-300 p-2 bg-gray-100 w-42\">Staff</th>\r\n                {months.map((month, idx) => (\r\n                  <th\r\n                    key={idx}\r\n                    className=\"border border-gray-300 p-2 bg-gray-100 w-32 cursor-pointer hover:bg-gray-200 text-sm\"\r\n                    onClick={() => handleMonthClick(month.globalIndex)}\r\n                  >\r\n                    {month.display}\r\n                  </th>\r\n                ))}\r\n              </tr>\r\n              <tr>\r\n                <th className=\"border border-gray-300 bg-gray-50 w-42 text-xs text-muted-foreground\">Unallocated</th>\r\n                {months.map((month) => {\r\n                  const monthUnallocated = projects.flatMap((project) => {\r\n                    const positionsForMonth =\r\n                      project.positions?.filter((pos) => pos.monthIndex === month.globalIndex) || []\r\n\r\n                    return positionsForMonth\r\n                      .map((position) => {\r\n                        const allocated = allocations\r\n                          .filter(\r\n                            (a) =>\r\n                              a.projectId === project.id &&\r\n                              a.monthIndex === month.globalIndex &&\r\n                              a.positionId === position.id,\r\n                          )\r\n                          .reduce((sum, a) => sum + (a.percentage || 0), 0)\r\n\r\n                        const unallocated = Math.max(0, position.percentage - allocated)\r\n                        if (unallocated <= 0) return null\r\n\r\n                        return {\r\n                          projectId: project.id,\r\n                          projectName: project.name,\r\n                          projectColor: project.color,\r\n                          positionId: position.id,\r\n                          positionName: position.name || \"Position\",\r\n                          percentage: unallocated,\r\n                        }\r\n                      })\r\n                      .filter((p): p is NonNullable<typeof p> => p != null)\r\n                  })\r\n\r\n                  return (\r\n                    <td\r\n                      key={month.globalIndex}\r\n                      className=\"border border-gray-300 bg-gray-50 p-1 align-top\"\r\n                      style={{ verticalAlign: \"top\" }}\r\n                    >\r\n                      <div className=\"flex flex-wrap gap-1\">\r\n                        {monthUnallocated.map((pos) => (\r\n                          <div\r\n                            key={`${pos.projectId}-${pos.positionId}`}\r\n                            className=\"flex items-center h-4 rounded overflow-hidden bg-gray-200 text-[9px] text-white\"\r\n                            style={{\r\n                              minWidth: \"50px\",\r\n                              maxWidth: \"120px\",\r\n                            }}\r\n                            title={`${pos.projectName} - ${pos.positionName} (${pos.percentage}% unallocated)`}\r\n                          >\r\n                            <div\r\n                              className=\"h-full flex items-center justify-center px-1 truncate\"\r\n                              style={{\r\n                                backgroundColor: pos.projectColor || \"#3b82f6\",\r\n                                width: \"100%\",\r\n                              }}\r\n                            >\r\n                              {pos.positionName} ({pos.percentage}%)\r\n                            </div>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </td>\r\n                  )\r\n                })}\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {groupedUsers.map((group) => (\r\n                <React.Fragment key={group.department}>\r\n                  <tr>\r\n                    <td colSpan={months.length + 1} className=\"border border-gray-300 p-1 font-semibold text-xs text-gray-800 bg-cyan-200\">\r\n                      {group.department}\r\n                    </td>\r\n                  </tr>\r\n                  {group.users.map((user) => (\r\n                    <tr key={user.id}>\r\n                      <td className=\"border border-gray-300 p-1 w-42\">\r\n                        <div className=\"flex items-center justify-between gap-1\">\r\n                          <span className=\"text-xs leading-tight\">{user.name}</span>\r\n                          <button\r\n                            onClick={() => editUser(user.id)}\r\n                            className=\"text-blue-600 hover:text-blue-800 text-xs\"\r\n                          >\r\n                            ✏️\r\n                          </button>\r\n                        </div>\r\n                      </td>\r\n                      {months.map((month) => (\r\n                        <AllocationCell\r\n                          key={`${user.id}-${month.globalIndex}`}\r\n                          userId={user.id}\r\n                          monthIndex={month.globalIndex}\r\n                          allocations={allocations.filter(\r\n                            (a) => a.userId === user.id && a.monthIndex === month.globalIndex,\r\n                          )}\r\n                          project={projects.find((p) => p.id === allocations[0]?.projectId)}\r\n                          projects={projects}\r\n                          month={month}\r\n                          userEnded={!isUserActiveInMonth(user.id, month.globalIndex)}\r\n                          onEdit={(id) => {\r\n                            setEditingId(id)\r\n                            const alloc = allocations.find((a) => a.id === id)\r\n                            if (alloc) setEditValue(alloc.percentage)\r\n                          }}\r\n                          onSaveEdit={handleEditAllocation}\r\n                          onRemove={handleRemoveAllocation}\r\n                          onEmptyCellClick={() => handleEmptyCellClick(user.id, month.globalIndex)}\r\n                        />\r\n                      ))}\r\n                    </tr>\r\n                  ))}\r\n                </React.Fragment>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n\r\n      {showUserModal && (\r\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-lg p-6 w-96\">\r\n            <h3 className=\"text-lg font-bold mb-4\">{editingUserId ? \"Edit User\" : \"Add User\"}</h3>\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-1\">Name</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={editingUserName}\r\n                  onChange={(e) => setEditingUserName(e.target.value)}\r\n                  className=\"w-full border rounded px-2 py-1\"\r\n                  placeholder=\"User name\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-1\">Department</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={editingUserDept}\r\n                  onChange={(e) => setEditingUserDept(e.target.value)}\r\n                  className=\"w-full border rounded px-2 py-1\"\r\n                  placeholder=\"Department\"\r\n                />\r\n              </div>\r\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-1\">Start Date</label>\r\n                  <input\r\n                    type=\"date\"\r\n                    value={editingUserStartDate}\r\n                    onChange={(e) => setEditingUserStartDate(e.target.value)}\r\n                    className=\"w-full border rounded px-2 py-1 text-sm\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-1\">End Date</label>\r\n                  <input\r\n                    type=\"date\"\r\n                    value={editingUserEndDate}\r\n                    onChange={(e) => setEditingUserEndDate(e.target.value)}\r\n                    className=\"w-full border rounded px-2 py-1 text-sm\"\r\n                  />\r\n                  <p className=\"mt-1 text-[11px] text-gray-500\">Leave blank if working indefinitely.</p>\r\n                </div>\r\n              </div>\r\n              <div className=\"flex gap-2 justify-end\">\r\n                {editingUserId && (\r\n                  <Button\r\n                    variant=\"destructive\"\r\n                    onClick={() => {\r\n                      deleteUser(editingUserId)\r\n                      setShowUserModal(false)\r\n                    }}\r\n                  >\r\n                    Delete\r\n                  </Button>\r\n                )}\r\n                <Button variant=\"outline\" onClick={() => setShowUserModal(false)}>\r\n                  Cancel\r\n                </Button>\r\n                <Button onClick={saveUserChanges}>Save</Button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {showPositionModal && selectedCellMonth !== null && (\r\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-lg p-6 w-96 max-h-[80vh] overflow-y-auto\">\r\n            <h3 className=\"text-lg font-bold mb-4\">Select Position</h3>\r\n            <div className=\"space-y-2\">\r\n              {projects.flatMap((project) => {\r\n                // Positions created in ProjectManager already use a global monthIndex (0 = Jan 2024, ...)\r\n                // Cells in the grid also use this same global monthIndex. So we just match directly.\r\n                const monthPositions = (project.positions || [])\r\n                  .filter((p) => p.monthIndex === selectedCellMonth && (p.percentage || 0) > 0)\r\n                  .map((p) => {\r\n                    const allocated = allocations\r\n                      .filter(\r\n                        (a) =>\r\n                          a.projectId === project.id &&\r\n                          a.monthIndex === selectedCellMonth &&\r\n                          a.positionName === p.name,\r\n                      )\r\n                      .reduce((sum, a) => sum + (a.percentage || 0), 0)\r\n\r\n                    const available = Math.max(0, (p.percentage || 0) - allocated)\r\n\r\n                    return {\r\n                      ...p,\r\n                      projectId: project.id,\r\n                      projectName: project.name,\r\n                      projectColor: project.color,\r\n                      available,\r\n                      allocated,\r\n                    }\r\n                  })\r\n                  .filter((p) => p.available > 0)\r\n\r\n                const availablePositions = monthPositions\r\n\r\n                return availablePositions.map((position) => (\r\n                  <button\r\n                    key={`${project.id}-${position.id}`}\r\n                    onClick={() => {\r\n                      handleAddAllocation(project.id, position.name || \"\")\r\n                    }}\r\n                    className=\"w-full text-left p-3 rounded border border-gray-200 hover:bg-blue-50 transition-colors\"\r\n                    style={{\r\n                      borderLeft: `4px solid ${project.color}`,\r\n                    }}\r\n                  >\r\n                    <div className=\"flex justify-between items-start\">\r\n                      <div>\r\n                        <div className=\"font-medium\">{position.name || \"Unnamed\"}</div>\r\n                        <div className=\"text-sm text-gray-600\">{project.name}</div>\r\n                      </div>\r\n                      <div className=\"text-right\">\r\n                        <div className=\"text-sm font-medium\">{position.available}%</div>\r\n                        <div className=\"text-xs text-gray-500\">\r\n                          {position.allocated > 0 ? `${position.allocated}% allocated` : 'Not allocated'}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"mt-2 w-full bg-gray-200 rounded-full h-2\">\r\n                      <div\r\n                        className=\"bg-blue-500 h-2 rounded-full\"\r\n                        style={{\r\n                          width: `${(position.allocated / position.percentage) * 100}%`,\r\n                          backgroundColor: project.color,\r\n                        }}\r\n                      />\r\n                    </div>\r\n                  </button>\r\n                ))\r\n              })}\r\n            </div>\r\n            {projects.every(\r\n              (project) =>\r\n                !project.positions?.some((p) => p.monthIndex === selectedCellMonth && (p.percentage || 0) > 0),\r\n            ) && (\r\n              <div className=\"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded text-sm text-yellow-800\">\r\n                No positions available for this month. Add positions in the project settings.\r\n              </div>\r\n            )}\r\n            <Button variant=\"outline\" onClick={() => setShowPositionModal(false)} className=\"w-full mt-4\">\r\n              Close\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n          </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}